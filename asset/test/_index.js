parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"lnUc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.copy=exports.move=exports.remove=exports.add=exports.replace=exports.length=exports.lookup=exports.sets=exports.setm=exports.gets=exports.getm=exports.goTo=exports.makePath=exports.basename=exports.path=exports.unserialize=exports.serialize=exports.toJson=exports.fromJson=void 0;var t=r(require("ramda"));function e(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return e=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=e();if(r&&r.has(t))return r.get(t);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var s=a?Object.getOwnPropertyDescriptor(t,n):null;s&&(s.get||s.set)?Object.defineProperty(o,n,s):o[n]=t[n]}return o.default=t,r&&r.set(t,o),o}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,o)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach(function(e){n(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const s=(e,r,o)=>t.append(r,t.append(e,o)),p=e=>t.init(t.init(e)),l=(e,r)=>!e.length||t.hasPath(e,r),i=t=>t[t.length-2],c=t=>{if("number"==typeof t)return t;const e=+t;return e+""===t?e:t},u=t=>{let e="";for(let r=0;r<t.length;r++)"@value"==t[r]?e+="/":"number"==typeof t[r]||"-"==t[r]?e+="*":e+=t[r];return e},h=(t,e,r)=>{switch(null===t?"null":Array.isArray(t)?"array":typeof t){case"array":const o=[],a=e+"/*";for(let e=0;e<t.length;e++)o[e]=h(t[e],a,r);return r(o,e);case"object":const n={};for(let s in t)n[s]=h(t[s],e+"/"+s,r);return r(n,e);default:return r(t,e)}},f=t=>{const e=t["@value"];switch(null===e?"null":Array.isArray(e)?"array":typeof e){case"array":const t=[];for(let o=0;o<e.length;o++)t[o]=f(e[o]);return t;case"object":const r={};for(let o in e)r[o]=f(e[o]);return r;default:return e}},d=(t,e)=>({data:h(t,"",e),path:[],validate:e});exports.fromJson=d;const w=t=>f(t.data);exports.toJson=w;const v=t=>({data:t.data,path:t.path});exports.serialize=v;const y=(t,e)=>({data:t.data,path:t.path,validate:e});exports.unserialize=y;const g=t=>{let e="";for(let r=0;r<t.path.length;r++)"@value"==t.path[r]?e+="/":e+=t.path[r];return e};exports.path=g;const x=e=>{if(!t.length(e.path))throw new Error("basename/1: on root location");return t.last(e.path)};exports.basename=x;const m=(e,r)=>{if("0"===r)return e;let o=t.split("/",r),a=[];if(r.length>0&&"/"!=r[0]){const r=+o[0];a=e;for(let e=0;e<r;e++){if(!t.length(a))throw new Error("compose/1: no parent location");a=p(a)}}o=t.tail(o);for(let t=0;t<o.length;t++)a=s("@value",c(o[t]),a);return a},b=(t,e)=>{const r=m(e.path,t);let o="";for(let a=0;a<r.length;a++)"@value"==r[a]?o+="/":o+=r[a];return o};exports.makePath=b;const O=(t,e)=>{const r=m(e.path,t);if(!l(r,e.data))throw new Error("goTo/1: not found: "+t);return a(a({},e),{},{path:r})};exports.goTo=O;const P=(e,r,o,a)=>{const n=m(a.path,e),s=t.path(n,a.data);if(!s)throw new Error("getm/1: not found: "+e);return s.hasOwnProperty(r)?s[r]:o};exports.getm=P;const j=(e,r)=>{const o=m(r.path,e),a=t.path(o,r.data);if(!a)throw new Error("gets/1: not found: "+e);return a};exports.gets=j;const E=(e,r,o,n)=>{const s=m(n.path,e),p=t.path(s,n.data);if(!p)throw new Error("setm/1: not found: "+e);const l=a(a({},p),{},{[r]:o}),i=t.assocPath(s,l,n.data);return a(a({},n),{},{data:i})};exports.setm=E;const A=(e,r,o)=>{const n=m(o.path,e);if(!l(n,o.data))throw new Error("sets/1: not found: "+e);const s=t.assocPath(n,r,o.data);return a(a({},o),{},{data:s})};exports.sets=A;const k=(e,r)=>{const o=m(r.path,e),a=t.path(o,r.data);if(!a)throw new Error("lookup/1: not found: "+e);return f(a)};exports.lookup=k;const D=(e,r)=>{const o=m(r.path,e),a=t.path(o,r.data);if(!a)throw new Error("length/1: not found: "+e);if(!Array.isArray(a["@value"]))throw new Error("length/2: not a list: "+e);return a["@value"].length};exports.length=D;const z=(t,e,r)=>{throw new Error("implement!")};exports.replace=z;const J=(e,r,o)=>{const n=m(o.path,e),s=p(n),l=t.last(n),i=t.path(s,o.data);if("object"!=typeof i["@value"])throw new Error("add/1 neither a record nor a list: "+e);if(Array.isArray(i["@value"])){const p="-"===l?i["@value"].length:l;if("number"!=typeof p||p%1!=0)throw new Error("add/2 invalid index: "+e);if(p<0||p>i["@value"].length)throw new Error("add/3 out of range: "+e);const c=t.insert(p,h(r,u(n),o.validate),i["@value"]),f=o.validate(c,u(s)),d=t.assocPath(s,f,o.data);return a(a({},o),{},{data:d})}{if("string"!=typeof l)throw new Error("add/4 invalid name: "+e);const p=h(r,u(n),o.validate),c=a(a({},i["@value"]),{},{[l]:p}),f=o.validate(c,u(s)),d=t.assocPath(s,f,o.data);return a(a({},o),{},{data:d})}};exports.add=J;const M=(e,r)=>{const o=m(r.path,e),n=p(o),s=t.last(o),l=t.path(n,r.data);if("object"!=typeof l["@value"]||null===l["@value"])throw new Error("remove/1 neither a record nor a list: "+e);if(Array.isArray(l["@value"])){if("number"!=typeof s||s%1!=0)throw new Error("remove/2 invalid index: "+e);if(s<0||s>=l["@value"].length)throw new Error("remove/3 out of range: "+e);const o=t.remove(s,1,l["@value"]),p=r.validate(o,u(n)),i=t.assocPath(n,p,r.data);return a(a({},r),{},{data:i})}{if(!l["@value"].hasOwnProperty(s))throw new Error("remove/4: property not found: "+e);const o=t.dissoc(s,l["@value"]),p=r.validate(o,u(n)),i=t.assocPath(n,p,r.data);return a(a({},r),{},{data:i})}};exports.remove=M;const _=(t,e,r)=>{throw new Error("impelement!")};exports.move=_;const T=(t,e,r)=>{throw new Error("impelement!")};exports.copy=T;
},{}],"WCXc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.run=void 0;var e=r(require("../src/env"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var l=n?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(t,u,l):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}const t=(e,o)=>({"@value":e}),n=(e,o,r)=>{const t=o();t==r?console.log("ASSERT",e,"OK"):console.log("ASSERT",e,"NG",t,r)},u=(e,o,r)=>{let t=null;try{o();t="no error"}catch(n){if(n instanceof Error&&n.message.startsWith(r))return void console.log("ASSERT",e,"OK");t="matching failure: "+n.message}console.log("ASSERT",e,"NG",t)},l=()=>{let o=e.fromJson({name:"Bob",age:24,buddies:["Mam","Dad"]},t);n(1,()=>e.lookup("/name",o),"Bob"),o=e.add("/email","info@example.com",o),n(2,()=>e.lookup("/email",o),"info@example.com"),u(2.1,()=>e.lookup("/foo",o),"lookup/"),n(3,()=>e.lookup("/buddies/1",o),"Dad"),o=e.add("/buddies/1","Pochi",o),n(4,()=>e.lookup("/buddies/1",o),"Pochi"),u(4.1,()=>e.lookup("/buddies/5",o),"lookup/"),o=e.goTo("/buddies",o),n(5,()=>e.lookup("0/1",o),"Pochi"),u(5.1,()=>e.lookup("0/5",o),"lookup/"),o=e.goTo("",o),o=e.add("/buddies/-","Komino",o),n(5,()=>e.lookup("/buddies/3",o),"Komino"),o=e.remove("/buddies/3",o),u(6,()=>e.lookup("/buddies/3",o),"lookup/"),o=e.remove("/email",o),u(7,()=>e.lookup("/email",o),"lookup/"),u(7.1,()=>e.remove("/email",o),"remove/"),o=e.setm("/name","invalid",!0,o),n(8,()=>e.getm("/name","invalid",!1,o),!0)};exports.run=l;
},{"../src/env":"lnUc"}],"l6QX":[function(require,module,exports) {
"use strict";var e=t(require("./env"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var f=u?Object.getOwnPropertyDescriptor(e,o):null;f&&(f.get||f.set)?Object.defineProperty(n,o,f):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}e.run();
},{"./env":"WCXc"}]},{},["l6QX"], null)
//# sourceMappingURL=/_index.js.map