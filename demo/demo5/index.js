parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"meBh":[function(require,module,exports) {
var e=/\{([0-9a-zA-Z_]+)\}/g;function r(r){var n;if(2===arguments.length&&"object"==typeof arguments[1])n=arguments[1];else{n=new Array(arguments.length-1);for(var t=1;t<arguments.length;++t)n[t-1]=arguments[t]}return n&&n.hasOwnProperty||(n={}),r.replace(e,function(e,t,l){var a;return"{"===r[l-1]&&"}"===r[l+e.length]?t:null==(a=n.hasOwnProperty(t)?n[t]:null)?"":a})}module.exports=r;
},{}],"vZqM":[function(require,module,exports) {
"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalizeQuery=exports.commonPath=exports.isJsonValue=exports.typeOf=exports.pathToArray=exports.normalizePathArray=exports.appendPath=exports.normalizePath=exports.isIntStr=void 0;var t=function(r){var t=+r;return t%1==0&&r===""+t};exports.isIntStr=t;var e=function(r){for(var t=r.split("/"),e=1;e<t.length;e++)(0,exports.isIntStr)(t[e])&&(t[e]="*");return t.join("/")};exports.normalizePath=e;var o=function(r,t){if(""==t.charAt(0)||"/"==t.charAt(0))return t;if("0"===t)return r;var e=(0,exports.pathToArray)(r),o=t.split("/"),n=[],a=+o[0];return a>(n=e).length&&(a=n.length),n.splice(n.length-a,a),o.shift(),0==o.length&&0==n.length?"":"/"+n.concat(o).join("/")};exports.appendPath=o;var n=function(r){for(var t="",e=0;e<r.length;e++)"number"==typeof r[e]||(0,exports.isIntStr)(""+r[e])?t+="/*":t+="/"+r[e];return t};exports.normalizePathArray=n;var a=function(r){for(var t=r.split("/"),e=[],o=1;o<t.length;o++)e.push((0,exports.isIntStr)(t[o])?+t[o]:t[o]);return e};exports.pathToArray=a;var s=function(t){return null===t?"null":Array.isArray(t)?"array":r(t)};exports.typeOf=s;var p=function(r){switch((0,exports.typeOf)(r)){case"null":case"number":case"boolean":case"string":case"object":case"array":return!0;default:return!1}};exports.isJsonValue=p;var i=function(r,t){for(var e=r.split("/"),o=t.split("/"),n=[],a=0;a<e.length&&!(o.length<=a)&&e[a]==o[a];a++)n.push(e[a]);return n.join("/")};exports.commonPath=i;var u=function(r,t){var e={};for(var o in r)switch((0,exports.typeOf)(o)){case"null":t||(e[o]="");break;case"boolean":e[o]=r[o]?"true":"false";break;case"number":e[o]=""+r[o];break;case"string":if(t&&""===r[o])break;e[o]=r[o]}return e};exports.normalizeQuery=u;
},{}],"KUNA":[function(require,module,exports) {
function e(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}module.exports=e;
},{}],"FNXO":[function(require,module,exports) {
var e=require("./_isPlaceholder");function r(r){return function n(t){return 0===arguments.length||e(t)?n:r.apply(this,arguments)}}module.exports=r;
},{"./_isPlaceholder":"KUNA"}],"FYPD":[function(require,module,exports) {
var r=require("./_curry1"),e=require("./_isPlaceholder");function n(n){return function u(t,c){switch(arguments.length){case 0:return u;case 1:return e(t)?u:r(function(r){return n(t,r)});default:return e(t)&&e(c)?u:e(t)?r(function(r){return n(r,c)}):e(c)?r(function(r){return n(t,r)}):n(t,c)}}}module.exports=n;
},{"./_curry1":"FNXO","./_isPlaceholder":"KUNA"}],"jKwu":[function(require,module,exports) {
function t(t,e){return Object.prototype.hasOwnProperty.call(e,t)}module.exports=t;
},{}],"aL5Q":[function(require,module,exports) {
var r=require("./internal/_curry1"),e=r(function(r){return null==r});module.exports=e;
},{"./internal/_curry1":"FNXO"}],"Deno":[function(require,module,exports) {
var r=require("./internal/_curry2"),e=require("./internal/_has"),n=require("./isNil"),i=r(function(r,i){if(0===r.length||n(i))return!1;for(var t=i,u=0;u<r.length;){if(n(t)||!e(r[u],t))return!1;t=t[r[u]],u+=1}return!0});module.exports=i;
},{"./internal/_curry2":"FYPD","./internal/_has":"jKwu","./isNil":"aL5Q"}],"E0bJ":[function(require,module,exports) {
module.exports=Array.isArray||function(r){return null!=r&&r.length>=0&&"[object Array]"===Object.prototype.toString.call(r)};
},{}],"sUY6":[function(require,module,exports) {
var r=require("./_isArray");function t(t,e){return function(){var n=arguments.length;if(0===n)return e();var a=arguments[n-1];return r(a)||"function"!=typeof a[t]?e.apply(this,arguments):a[t].apply(a,Array.prototype.slice.call(arguments,0,n-1))}}module.exports=t;
},{"./_isArray":"E0bJ"}],"BbYv":[function(require,module,exports) {
var r=require("./_curry1"),n=require("./_curry2"),u=require("./_isPlaceholder");function t(t){return function e(c,i,o){switch(arguments.length){case 0:return e;case 1:return u(c)?e:n(function(r,n){return t(c,r,n)});case 2:return u(c)&&u(i)?e:u(c)?n(function(r,n){return t(r,i,n)}):u(i)?n(function(r,n){return t(c,r,n)}):r(function(r){return t(c,i,r)});default:return u(c)&&u(i)&&u(o)?e:u(c)&&u(i)?n(function(r,n){return t(r,n,o)}):u(c)&&u(o)?n(function(r,n){return t(r,i,n)}):u(i)&&u(o)?n(function(r,n){return t(c,r,n)}):u(c)?r(function(r){return t(r,i,o)}):u(i)?r(function(r){return t(c,r,o)}):u(o)?r(function(r){return t(c,i,r)}):t(c,i,o)}}}module.exports=t;
},{"./_curry1":"FNXO","./_curry2":"FYPD","./_isPlaceholder":"KUNA"}],"ZXf7":[function(require,module,exports) {
var r=require("./internal/_checkForMethod"),e=require("./internal/_curry3"),t=e(r("slice",function(r,e,t){return Array.prototype.slice.call(t,r,e)}));module.exports=t;
},{"./internal/_checkForMethod":"sUY6","./internal/_curry3":"BbYv"}],"anXS":[function(require,module,exports) {
var e=require("./slice"),r=e(0,-1);module.exports=r;
},{"./slice":"ZXf7"}],"Hs0m":[function(require,module,exports) {
module.exports=Number.isInteger||function(e){return e<<0===e};
},{}],"o8ut":[function(require,module,exports) {
function t(t){return"[object String]"===Object.prototype.toString.call(t)}module.exports=t;
},{}],"oNhL":[function(require,module,exports) {
var r=require("./internal/_curry2"),e=require("./internal/_isString"),n=r(function(r,n){var t=r<0?n.length+r:r;return e(n)?n.charAt(t):n[t]});module.exports=n;
},{"./internal/_curry2":"FYPD","./internal/_isString":"o8ut"}],"HrYX":[function(require,module,exports) {
var r=require("./internal/_curry2"),e=require("./internal/_isInteger"),n=require("./nth"),t=r(function(r,t){return r.map(function(r){for(var u,i=t,l=0;l<r.length;){if(null==i)return;u=r[l],i=e(u)?n(u,i):i[u],l+=1}return i})});module.exports=t;
},{"./internal/_curry2":"FYPD","./internal/_isInteger":"Hs0m","./nth":"oNhL"}],"hVwD":[function(require,module,exports) {
var r=require("./internal/_curry2"),e=require("./paths"),u=r(function(r,u){return e([r],u)[0]});module.exports=u;
},{"./internal/_curry2":"FYPD","./paths":"HrYX"}],"b7qh":[function(require,module,exports) {
var r=require("./internal/_curry3"),e=r(function(r,e,n){var u={};for(var a in n)u[a]=n[a];return u[r]=e,u});module.exports=e;
},{"./internal/_curry3":"BbYv"}],"E7lb":[function(require,module,exports) {
var r=require("./internal/_curry3"),e=require("./internal/_has"),i=require("./internal/_isArray"),n=require("./internal/_isInteger"),t=require("./assoc"),a=require("./isNil"),u=r(function r(u,l,s){if(0===u.length)return l;var c=u[0];if(u.length>1){var o=!a(s)&&e(c,s)?s[c]:n(u[1])?[]:{};l=r(Array.prototype.slice.call(u,1),l,o)}if(n(c)&&i(s)){var q=[].concat(s);return q[c]=l,q}return t(c,l,s)});module.exports=u;
},{"./internal/_curry3":"BbYv","./internal/_has":"jKwu","./internal/_isArray":"E0bJ","./internal/_isInteger":"Hs0m","./assoc":"b7qh","./isNil":"aL5Q"}],"kjHG":[function(require,module,exports) {
var r=require("./internal/_curry3"),e=r(function(r,e,l){r=r<l.length&&r>=0?r:l.length;var t=Array.prototype.slice.call(l,0);return t.splice(r,0,e),t});module.exports=e;
},{"./internal/_curry3":"BbYv"}],"lXzK":[function(require,module,exports) {
var e=require("./nth"),r=e(-1);module.exports=r;
},{"./nth":"oNhL"}],"aNOD":[function(require,module,exports) {
var r=require("./internal/_curry2"),e=r(function(r,e){var n={};for(var t in e)n[t]=e[t];return delete n[r],n});module.exports=e;
},{"./internal/_curry2":"FYPD"}],"GFTg":[function(require,module,exports) {
var r=require("./internal/_curry3"),e=r(function(r,e,l){var t=Array.prototype.slice.call(l,0);return t.splice(r,e),t});module.exports=e;
},{"./internal/_curry3":"BbYv"}],"jGF4":[function(require,module,exports) {
function e(e,n){var r;n=n||[];var t=(e=e||[]).length,l=n.length,o=[];for(r=0;r<t;)o[o.length]=e[r],r+=1;for(r=0;r<l;)o[o.length]=n[r],r+=1;return o}module.exports=e;
},{}],"UR7j":[function(require,module,exports) {
var r=require("./internal/_concat"),e=require("./internal/_curry3"),n=e(function(e,n,t){if(e>=t.length||e<-t.length)return t;var u=(e<0?t.length:0)+e,i=r(t);return i[u]=n(t[u]),i});module.exports=n;
},{"./internal/_concat":"jGF4","./internal/_curry3":"BbYv"}],"M4Rg":[function(require,module,exports) {
var r=require("./internal/_curry1"),n=r(function(r){return function(){return r}});module.exports=n;
},{"./internal/_curry1":"FNXO"}],"sDZI":[function(require,module,exports) {
var r=require("./internal/_curry3"),e=require("./adjust"),u=require("./always"),a=r(function(r,a,i){return e(r,u(a),i)});module.exports=a;
},{"./internal/_curry3":"BbYv","./adjust":"UR7j","./always":"M4Rg"}],"bjtJ":[function(require,module,exports) {
"use strict";function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var r,t=1,a=arguments.length;t<a;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}).apply(this,arguments)},t=this&&this.__rest||function(e,r){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&r.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)r.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(t[a[n]]=e[a[n]])}return t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.isEnv=exports.doReturn=exports.setPortal=exports.getExtra=exports.setExtra=exports.duplicate=exports.reduceDeep=exports.mapDeep=exports.validate=exports.copy=exports.move=exports.replace=exports.remove=exports.add=exports.setSlot=exports.getSlot=exports.extract=exports.test=exports.endUpdateTracking=exports.beginUpdateTracking=exports.isSame=exports.makeEnv=void 0;var n=require("./utils"),o=a(require("ramda/src/hasPath")),u=a(require("ramda/src/init")),i=a(require("ramda/src/path")),p=a(require("ramda/src/assocPath")),l=a(require("ramda/src/insert")),f=a(require("ramda/src/last")),d=a(require("ramda/src/dissoc")),c=a(require("ramda/src/remove")),s=a(require("ramda/src/update")),v=function(e,r){return!e.length||(0,o.default)(e,r)},h=function(e){return(0,u.default)((0,u.default)(e))},x=function(e){var r={value:e,invalid:!1,error:null};switch((0,n.typeOf)(e)){case"object":case"array":break;case"number":case"integer":r.input=""+e,r.touched=!1;break;case"boolean":r.input=e?"true":"false",r.touched=!1;break;case"null":r.input="",r.touched=!1;break;case"string":r.input=e,r.touched=!1}return r},y=function(e){return function e(r){switch((0,n.typeOf)(r)){case"array":for(var t=[],a=0;a<r.length;a++)t[a]=e(r[a]);return x(t);case"object":var o={};for(var u in r)o[u]=e(r[u]);return x(o);default:return x(r)}}(e)},w=function e(r){var t=r.value;switch((0,n.typeOf)(t)){case"array":for(var a=[],o=0;o<t.length;o++)a[o]=e(t[o]);return a;case"object":var u={};for(var i in t)u[i]=e(t[i]);return u;default:return t}},m=function(e,r,t,a){return{tree:y(e),trackUpdate:a,updatePoint:a?[]:null,schemaDb:r,validate:t,extra:{}}};exports.makeEnv=m;var b=function(e,r){return e.tree===r.tree&&e.extra===r.extra};exports.isSame=b;var P=function(e){for(var r=e.split("/"),t=[],a=1;a<r.length;a++)t.push("value"),t.push((0,n.isIntStr)(r[a])?+r[a]:r[a]);return t},g=function(e){for(var r="",t=0;t<e.length;t+=2)r+="/"+e[t+1];return r},E=function(e,r){if(null===e)return r;if(null===r)return e;for(var t=[],a=0;a<e.length&&!(a>=r.length)&&e[a+1]===r[a+1];a+=2)t.push(e[a]),t.push(e[a+1]);return t},O=function(e){return r(r({},e),{trackUpdate:!0})};exports.beginUpdateTracking=O;var k=function(e){var t=e.updatePoint?g(e.updatePoint):null;return console.log("update occurred at "+JSON.stringify(t)),[t,r(r({},e),{trackUpdate:!1,updatePoint:null})]};exports.endUpdateTracking=k;var j=function(e,r){return v(P(e),r.tree)};exports.test=j;var S=function(e,r){var t=P(e),a=(0,i.default)(t,r.tree);if(!a)throw new Error("extract/1: not found: "+e);return w(a)};exports.extract=S;var U=function(e,r){var t=P(e),a=(0,i.default)(t,r.tree);if(!a)throw new Error("getSlot/1: not found: "+e);return a};exports.getSlot=U;var D=function(e,t,a){var o=P(e),u=(0,i.default)(o,a.tree);if(!u)throw new Error("setSlot/1: not found: "+e);switch((0,n.typeOf)(u.value)){case"null":case"boolean":case"number":case"string":case"undefined":break;default:throw new Error("setSlot/2: not a scalar: "+e)}var l=(0,p.default)(o,t,a.tree),f=a.trackUpdate?E(a.updatePoint,o):a.updatePoint;return r(r({},a),{tree:l,updatePoint:f})};exports.setSlot=D;var q=function(e,t,a){var o,u=P(e),d=h(u),c=(0,f.default)(u),s=(0,i.default)(d,a.tree),v=(0,n.typeOf)(s.value);if("object"!=v&&"array"!=v)throw new Error("add/1 neither an object nor an array: "+e);if("array"==v){var w="-"===c?s.value.length:c;if("number"!=typeof w||w%1!=0)throw new Error("add/2 invalid index: "+e);if(w<0||w>s.value.length)throw new Error("add/3 index out of range: "+e);var m=y(t),b=(0,l.default)(w,m,s.value),g=x(b),O=(0,p.default)(d,g,a.tree),k=a.trackUpdate?E(a.updatePoint,d):a.updatePoint;return r(r({},a),{tree:O,updatePoint:k})}if("string"!=typeof c)throw new Error("add/4 invalid name: "+e);m=y(t);var j=r(r({},s.value),((o={})[c]=m,o));g=x(j),O=(0,p.default)(d,g,a.tree),k=a.trackUpdate?E(a.updatePoint,c in s.value?u:d):a.updatePoint;return r(r({},a),{tree:O,updatePoint:k})};exports.add=q;var _=function(e,t){var a=P(e),o=h(a),u=(0,f.default)(a),l=(0,i.default)(o,t.tree),s=(0,n.typeOf)(l.value);if("object"!=s&&"array"!=s)throw new Error("remove/1 neither an object nor an array: "+e);if("array"==s){if("number"!=typeof u||u%1!=0)throw new Error("remove/2 invalid index: "+e);if(u<0||u>=l.value.length)throw new Error("remove/3 out of range: "+e);var v=(0,c.default)(u,1,l.value),y=x(v),w=(0,p.default)(o,y,t.tree),m=t.trackUpdate?E(t.updatePoint,o):t.updatePoint;return r(r({},t),{tree:w,updatePoint:m})}if(!l.value.hasOwnProperty(u))throw new Error("remove/4: property not found: "+e);var b=(0,d.default)(u,l.value);y=x(b),w=(0,p.default)(o,y,t.tree),m=t.trackUpdate?E(t.updatePoint,o):t.updatePoint;return r(r({},t),{tree:w,updatePoint:m})};exports.remove=_;var T=function(e,t,a){var o,u=P(e);if(0==u.length){var l=y(t),d=a.trackUpdate?[]:a.updatePoint;return r(r({},a),{tree:l,updatePoint:d})}var c=h(u),v=(0,f.default)(u),w=(0,i.default)(c,a.tree),m=(0,n.typeOf)(w.value);if("object"!=m&&"array"!=m)throw new Error("replace/1 neither an object nor an array: "+e);if("array"==m){if("number"!=typeof v||v%1!=0)throw new Error("replace/2 invalid index: "+e);if(v<0||v>=w.value.length)throw new Error("replace/3 out of range: "+e);var b=y(t),g=(0,s.default)(v,b,w.value),O=x(g);l=(0,p.default)(c,O,a.tree),d=a.trackUpdate?E(a.updatePoint,u):a.updatePoint;return r(r({},a),{tree:l,updatePoint:d})}if("string"!=typeof v)throw new Error("replace/4 invalid name: "+e);if(!(v in w.value))throw new Error("replace/5 undefined property: "+e);b=y(t);var k=r(r({},w.value),((o={})[v]=b,o));O=x(k),l=(0,p.default)(c,O,a.tree),d=a.trackUpdate?E(a.updatePoint,u):a.updatePoint;return r(r({},a),{tree:l,updatePoint:d})};exports.replace=T;var R=function(e,r,t){var a=(0,exports.extract)(e,t);return t=(0,exports.remove)(e,t),t=(0,exports.add)(r,a,t)};exports.move=R;var I=function(e,r,t){var a=(0,exports.extract)(e,t);return t=(0,exports.add)(r,a,t)};exports.copy=I;var M=function(e,t){var a=null,o=function(e){var r=(0,n.appendPath)(a,e);return(0,exports.extract)(r,t)},u=P(e),l=(0,i.default)(u,t.tree);if(!l)throw new Error("validate/1: not found: "+e);var f=function e(r,u,i){var p=r.value;switch((0,n.typeOf)(p)){case"array":for(var l=[],f=0;f<p.length;f++)l[f]=e(p[f],u+"/*",i+"/"+f);return a=i,t.validate(l,r,t.schemaDb[u],o);case"object":var d={};for(var c in p)d[c]=e(p[c],u+"/"+c,i+"/"+c);return a=i,t.validate(d,r,t.schemaDb[u],o);default:a=i;var s=t.validate(p,r,t.schemaDb[u],o);if(s.value!==p)throw new Error("validate/0: value changed: "+i);return s}}(l,(0,n.normalizePath)(e),e),d=(0,p.default)(u,f,t.tree);return r(r({},t),{tree:d})};exports.validate=M;var z=function(e,t,a){var o=P(t),u=(0,i.default)(o,a.tree);if(!u)throw new Error("mapDeep/1: not found: "+t);var l=function t(a,o){var u=a.value;switch((0,n.typeOf)(u)){case"array":for(var i=[],p=0;p<u.length;p++)i[p]=t(u[p],o+"/"+p);return r(r({},e(a,o)),{value:i});case"object":var l={};for(var f in u)l[f]=t(u[f],o+"/"+f);return r(r({},e(a,o)),{value:l});default:return r(r({},e(a,o)),{value:u})}}(u,t),f=(0,p.default)(o,l,a.tree);return r(r({},a),{tree:f})};exports.mapDeep=z;var J=function(e,r,t,a){var o=P(t),u=(0,i.default)(o,a.tree);if(!u)throw new Error("reduceDeep/1: not found: "+t);return function r(t,a,o){var u=a.value;switch((0,n.typeOf)(u)){case"array":for(var i=0;i<u.length;i++)t=r(t,u[i],o+"/"+i);return e(t,a,o);case"object":for(var p in u)t=r(t,u[p],o+"/"+p);return e(t,a,o);default:return e(t,a,o)}}(r,u,t)};exports.reduceDeep=J;var N=function(e,t,a){var o,u=P(e);if(0==u.length){var l=t.tree,d=a.trackUpdate?[]:a.updatePoint;return r(r({},a),{tree:l,updatePoint:d})}var c=h(u),v=(0,f.default)(u),y=(0,i.default)(c,t.tree),w=(0,n.typeOf)(y.value);if("object"!=w&&"array"!=w)throw new Error("duplicate/1 neither an object nor an array: "+e);if("array"==w){if("number"!=typeof v||v%1!=0)throw new Error("duplicate/2 invalid index: "+e);if(v<0||v>=y.value.length)throw new Error("duplicate/3 out of range: "+e);var m=y.value[v],b=(0,s.default)(v,m,y.value),g=x(b);l=(0,p.default)(c,g,a.tree),d=a.trackUpdate?E(a.updatePoint,u):a.updatePoint;return r(r({},a),{tree:l,updatePoint:d})}if("string"!=typeof v)throw new Error("replace/4 invalid name: "+e);if(!(v in y.value))throw new Error("replace/5 undefined property: "+e);m=y.value[v];var O=r(r({},y.value),((o={})[v]=m,o));g=x(O),l=(0,p.default)(c,g,a.tree),d=a.trackUpdate?E(a.updatePoint,u):a.updatePoint;return r(r({},a),{tree:l,updatePoint:d})};exports.duplicate=N;var A=function(a,n,o){var u;if(null===n){var i=o.extra,p=a,l=(i[p],t(i,["symbol"===e(p)?p:p+""]));return r(r({},o),{extra:l})}l=r(r({},o.extra),((u={})[a]=n,u));return r(r({},o),{extra:l})};exports.setExtra=A;var B=function(e,r){return r.extra[e]||null};exports.getExtra=B;var C=function(e,a,n){if(e)return r(r({},n),{ret:e,onPromiseThen:a});n.ret,n.onPromiseThen;return t(n,["ret","onPromiseThen"])};exports.setPortal=C;var F=function(e){if(!e.ret)throw new Error("doReturn/0: no ret");e.ret(e)};exports.doReturn=F;var G=function(r){return null!=r&&"object"==e(r)&&"tree"in r};exports.isEnv=G;
},{"./utils":"vZqM","ramda/src/hasPath":"Deno","ramda/src/init":"anXS","ramda/src/path":"hVwD","ramda/src/assocPath":"E7lb","ramda/src/insert":"kjHG","ramda/src/last":"lXzK","ramda/src/dissoc":"aNOD","ramda/src/remove":"GFTg","ramda/src/update":"sDZI"}],"sokK":[function(require,module,exports) {
"use strict";function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.coerce=exports.applyRules=exports.validate=exports.defaultRules=exports.buildDb=void 0;var t=require("./utils"),n=function(e){if(!e)return!0;var r=e.charAt(e.length-1);return"null"==e||"?"==r},o=function(e){var r={};return function e(t,n){switch(r[n]=t,t.type){case"object":case"object?":for(var o in t.properties)e(t.properties[o],n+"/"+o);break;case"array":case"array?":e(t.items,n+"/*")}}(e,""),r};exports.buildDb=o;var i=function(r,t){if(!t)return!0;if(null===r)return n(t);switch(t){case"null":return!1;case"number":case"number?":return"number"==typeof r;case"integer":case"integer?":return"number"==typeof r&&r%1==0;case"boolean":case"boolean?":return"boolean"==typeof r;case"string":return"string"==typeof r;case"object":case"object?":return"object"==e(r)&&null!==r;case"array":case"array?":return Array.isArray(r);default:throw new Error("unknown type: "+t)}};exports.defaultRules={type:function(e,r){if("string"!=typeof e)throw new Error("invalid type");return!!i(r,e)||{code:"type."+e}},enum:function(e,r){if(!Array.isArray(e))throw new Error("invalid parameter");for(var t=0;t<e.length;t++)if(e[t]===r)return!0;return{code:"rule.enum"}},const:function(e,r){if(e===r)return!0;switch((0,t.typeOf)(e)){case"string":case"number":case"null":case"boolean":return{code:"rule.const",hint:e};default:return{code:"rule.const.nohint"}}},notEmpty:function(e,r){return"string"!=(0,t.typeOf)(r)||(""!==r||{code:"rule.notEmpty"})},required:function(e,r){if(!Array.isArray(e))throw new Error("invalid parameter");if("object"!=(0,t.typeOf)(r))return!0;for(var n=0;n<e.length;n++)if(!r.hasOwnProperty(e[n]))return{code:"rule.required",hint:e[n]};return!0},switchRequired:function(e,r,n){if("object"!=(0,t.typeOf)(e)||!("tagProperty"in e))throw new Error("invalid parameter");if("object"!=(0,t.typeOf)(r))return!0;var o=n("0/"+(e=e).tagProperty);if(!o)return{code:"rule.switchRequired.nohint",decription:"no tag"};if(!e.types[o])return{code:"rule.switchRequired.nohint",detail:"no type"};var i=e.types[o];if(!Array.isArray(i))throw new Error("invalid parameter");for(var u=0;u<i.length;u++)if(!r.hasOwnProperty(i[u]))return{code:"rule.switchRequired",hint:i[u]};return!0},same:function(e,r,n){if("string"!=typeof e)throw new Error("invalid parameter");var o=n(e);if(o!==r)switch((0,t.typeOf)(o)){case"string":case"number":case"null":case"boolean":return{code:"rule.same",hint:o};default:return{code:"rule.same.nohint"}}return!0},if:function(e,r,n,o){if("array"!=(0,t.typeOf)(e))throw new Error("invalid parameter");var i=e,u=i[0],a=i[1],c=i[2],l=i[3],s=void 0===l?{}:l;if(!u||!a||!c)throw new Error("invalid parameter");var f=n(u);return!0===(0,exports.applyRules)(f,a,n,o)?(0,exports.applyRules)(r,c,n,o):(0,exports.applyRules)(r,s,n,o)},multipleOf:function(e,r){if("number"!=typeof e)throw new Error("invalid parameter");return"number"!=typeof r||(r%e==0||{code:"rule.multipleOf",hint:e})},maximum:function(e,r){return"number"!=typeof r||(e>=r||{code:"rule.maximum",hint:e})},exclusiveMaximum:function(e,r){return"number"!=typeof r||(e>r||{code:"rule.exclusiveMaximum",hint:e})},minimum:function(e,r){return"number"!=typeof r||(e<=r||{code:"rule.minimum",hint:e})},exclusiveMinimum:function(e,r){return"number"!=typeof r||(e<r||{code:"rule.exclusiveMinimum",hint:e})},maxLength:function(e,r){return"string"!=typeof r||(r.length<=e||{code:"rule.maxLength",hint:e})},minLength:function(e,r){return"string"!=typeof r||(r.length>=e||{code:"rule.minLength",hint:e})},pattern:function(e,r){if("string"!=typeof e)throw new Error("invalid parameter");return"string"!=typeof r||(!!new RegExp(e).test(r)||{code:"rule.pattern",hint:e})},maxItems:function(e,r){if("number"!=typeof e)throw new Error("invalid parameter");return!Array.isArray(r)||(r.length<=e||{code:"rule.maxItems",hint:e})},minItems:function(e,r){if("number"!=typeof e)throw new Error("invalid parameter");return!Array.isArray(r)||(r.length>=e||{code:"rule.minItems",hint:e})}};var u=function(e){return function(n,o,i,u){if(!(0,t.isJsonValue)(n)){if(i&&i.type){var a={code:"type."+i.type,detail:"given value: "+n};return r(r({},o),{value:n,invalid:!0,error:a})}a={code:"value",detail:"given value: "+n};return r(r({},o),{value:n,invalid:!0,error:a})}if(i){var c=(0,exports.applyRules)(n,i,u,e);if(!0!==c)return r(r({},o),{value:n,invalid:!0,error:c})}return r(r({},o),{value:n,invalid:!1,error:null})}};exports.validate=u;var a=function(e,r,t,n){for(var o in r){var i=n[o];if(i){var u=i(r[o],e,t,n);if(!0!==u)return u}}return!0};exports.applyRules=a;var c=function(e,r,t){if(e=""+e,!t)throw new Error("coerce/0: no schema");if(!t.type||"string"!=typeof t.type)throw new Error("coerce/1: type not specified");var o=t.type;if(-1==["null","boolean","boolean?","integer","integer?","number","number?","string"].indexOf(o))throw new Error("coerce/2: not a coercion enabled type: "+o);switch(o){case"null":break;case"number":case"number?":var i=+e;if(""+i===e)return{value:i,input:e,touched:r.touched};break;case"integer":case"integer?":var u=+e;if(""+u===e&&u%1==0)return{value:u,input:e,touched:r.touched};break;case"boolean":case"boolean?":if("true"===e||"false"===e)return{value:"true"===e,input:e,touched:r.touched};break;case"string":return{value:e,input:e,touched:r.touched}}return""==e&&n(o)?{value:null,input:e,touched:r.touched}:{input:e,touched:r.touched}};exports.coerce=c;
},{"./utils":"vZqM"}],"D0Z0":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=this&&this.__assign||function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultErrorMessages=exports.normalizeError=exports.isError=void 0;var n=r(require("string-template")),a=function(t){return"object"==e(t)&&null!=t&&"code"in t};exports.isError=a;var l=function(e){return function(r){var a=e[r.code]||e["detail"in r?"fallback":"fallback.nodetail"],l=(0,n.default)(a,r);return t(t({},r),{message:l})}};exports.normalizeError=l,exports.defaultErrorMessages={fallback:"Error code:{code}; detail:{detail}","fallback.nodetail":"Error code:{code}",value:"Invalid value","type.null":"Please input a null value","type.boolean":"Please input a boolean value","type.boolean?":"Please input a boolean value or a null","type.integer":"Please input an integer","type.integer?":"Please input an integer or a null","type.number":"Please input a number","type.number?":"Please input a number or a null","type.string":"Please input a string","type.object":"Please input an object value","type.object?":"Please input an object value or a null","type.array":"Please input an array value","type.array?":"Please input an array value or a null","rule.enum":"Invalid input","rule.const":"Input {hint}","rule.const.nohint":"Invalid input","rule.notEmpty":"Please input","rule.required":'Missing property "{hint}"',"rule.switchRequired":'Missing property "{hint}"',"rule.switchRequired.nohint":"Properties are missing","rule.same":"Please input {hint}","rule.same.nohint":"Invalid input","rule.multipleOf":"Please enter a multiple of {hint}","rule.maximum":"Please enter {hint} or less","rule.exclusiveMaximum":"Please enter less than {hint}","rule.minimum":"Please enter {hint} or more","rule.exclusiveMinimum":"Please enter more than {hint}","rule.maxLength":"Please enter no more than {hint} characters","rule.minLength":"Please enter at least {hint} characters","rule.pattern":"Invalid format","rule.maxItems":"Please make it {hint} or less","rule.minItems":"Please make it {hint} or more","http.400":"HTTP error: {detail}","http:401":"HTTP error: {detail}","http:403":"HTTP error: {detail}","http.404":"HTTP error: {detail}","http.405":"HTTP error: {detail}","http.406":"HTTP error: {detail}","http.407":"HTTP error: {detail}","http.408":"HTTP error: {detail}","http.409":"HTTP error: {detail}","http.410":"HTTP error: {detail}","http.500":"HTTP error: {detail}","http.501":"HTTP error: {detail}","http.502":"HTTP error: {detail}","http.503":"HTTP error: {detail}"};
},{"string-template":"meBh"}],"aft2":[function(require,module,exports) {
"use strict";function e(e,n){for(var t=[],r=[],o=arguments.length;o-- >2;)t.push(arguments[o]);for(;t.length;){var l=t.pop();if(l&&l.pop)for(o=l.length;o--;)t.push(l[o]);else null!=l&&!0!==l&&!1!==l&&r.push(l)}return"function"==typeof e?e(n||{},r):{nodeName:e,attributes:n||{},children:r,key:n&&n.key}}function n(e,n,t,r){var o,l=[].map,u=r&&r.children[0]||null,i=u&&function e(n){return{nodeName:n.nodeName.toLowerCase(),attributes:{},children:l.call(n.childNodes,function(n){return 3===n.nodeType?n.nodeValue:e(n)})}}(u),a=[],f=!0,s=p(e),c=function e(n,t,r){for(var o in r)"function"==typeof r[o]?function(e,o){r[e]=function(e){var l=o(e);return"function"==typeof l&&(l=l(g(n,s),r)),l&&l!==(t=g(n,s))&&!l.then&&h(s=y(n,p(t,l),s)),l}}(o,r[o]):e(n.concat(o),t[o]=p(t[o]),r[o]=p(r[o]));return r}([],s,p(n));return h(),c;function d(e){return"function"==typeof e?d(e(s,c)):null!=e?e:""}function v(){o=!o;var e=d(t);for(r&&!o&&(u=function e(n,t,r,o,l){if(o===r);else if(null==r||r.nodeName!==o.nodeName){var u=function e(n,t){var r="string"==typeof n||"number"==typeof n?document.createTextNode(n):(t=t||"svg"===n.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",n.nodeName):document.createElement(n.nodeName);var o=n.attributes;if(o){o.oncreate&&a.push(function(){o.oncreate(r)});for(var l=0;l<n.children.length;l++)r.appendChild(e(n.children[l]=d(n.children[l]),t));for(var u in o)b(r,u,o[u],null,t)}return r}(o,l);n.insertBefore(u,t),null!=r&&k(n,t,r),t=u}else if(null==r.nodeName)t.nodeValue=o;else{!function(e,n,t,r){for(var o in p(n,t))t[o]!==("value"===o||"checked"===o?e[o]:n[o])&&b(e,o,t[o],n[o],r);var l=f?t.oncreate:t.onupdate;l&&a.push(function(){l(e,n)})}(t,r.attributes,o.attributes,l=l||"svg"===o.nodeName);for(var i={},s={},c=[],v=r.children,h=o.children,y=0;y<v.length;y++){c[y]=t.childNodes[y];var g=m(v[y]);null!=g&&(i[g]=[c[y],v[y]])}for(var y=0,N=0;N<h.length;){var g=m(v[y]),x=m(h[N]=d(h[N]));if(s[g])y++;else if(null==x||x!==m(v[y+1]))if(null==x||f)null==g&&(e(t,c[y],v[y],h[N],l),N++),y++;else{var T=i[x]||[];g===x?(e(t,T[0],T[1],h[N],l),y++):T[0]?e(t,t.insertBefore(T[0],c[y]),T[1],h[N],l):e(t,c[y],null,h[N],l),s[x]=h[N],N++}else null==g&&k(t,c[y],v[y]),y++}for(;y<v.length;)null==m(v[y])&&k(t,c[y],v[y]),y++;for(var y in i)s[y]||k(t,i[y][0],i[y][1])}return t}(r,u,i,i=e)),f=!1;a.length;)a.pop()()}function h(){o||(o=!0,setTimeout(v))}function p(e,n){var t={};for(var r in e)t[r]=e[r];for(var r in n)t[r]=n[r];return t}function y(e,n,t){var r={};return e.length?(r[e[0]]=e.length>1?y(e.slice(1),n,t[e[0]]):n,p(t,r)):n}function g(e,n){for(var t=0;t<e.length;)n=n[e[t++]];return n}function m(e){return e?e.key:null}function N(e){return e.currentTarget.events[e.type](e)}function b(e,n,t,r,o){if("key"===n);else if("style"===n)if("string"==typeof t)e.style.cssText=t;else for(var l in"string"==typeof r&&(r=e.style.cssText=""),p(r,t)){var u=null==t||null==t[l]?"":t[l];"-"===l[0]?e.style.setProperty(l,u):e.style[l]=u}else"o"===n[0]&&"n"===n[1]?(n=n.slice(2),e.events?r||(r=e.events[n]):e.events={},e.events[n]=t,t?r||e.addEventListener(n,N):e.removeEventListener(n,N)):n in e&&"list"!==n&&"type"!==n&&"draggable"!==n&&"spellcheck"!==n&&"translate"!==n&&!o?e[n]=null==t?"":t:null!=t&&!1!==t&&e.setAttribute(n,t),null!=t&&!1!==t||e.removeAttribute(n)}function k(e,n,t){function r(){e.removeChild(function e(n,t){var r=t.attributes;if(r){for(var o=0;o<t.children.length;o++)e(n.childNodes[o],t.children[o]);r.ondestroy&&r.ondestroy(n)}return n}(n,t))}var o=t.attributes&&t.attributes.onremove;o?o(n,r):r()}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.app=n,exports.h=e;
},{}],"Trba":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},t=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&t(n,e,a);return r(n,e),n},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.h=exports.once=exports.start=exports.API=void 0;var o,u=require("./utils"),i=n(require("./env")),l=n(require("./schema")),c=n(require("./errors")),s=require("hyperapp");!function(t){t.test=i.test,t.extract=i.extract,t.getSlot=i.getSlot,t.add=i.add,t.remove=i.remove,t.replace=i.replace,t.move=i.move,t.copy=i.copy,t.duplicate=i.duplicate,t.validate=i.validate,t.mapDeep=i.mapDeep,t.reduceDeep=i.reduceDeep,t.getExtra=i.getExtra,t.touchAll=function(t,r){return i.mapDeep(function(t,r){return e(e({},t),{touched:!0})},t,r)},t.countValidationErrors=function(e,t){return i.reduceDeep(function(e,t,r){return e+(t.touched&&t.invalid?1:0)},0,e,t)},t.validationErrors=function(e,t){var r=[];return i.reduceDeep(function(e,t,n){return t.touched&&t.invalid&&r.push(n),null},null,e,t),r},t.foldValidity=function(e,r){return t.reduceDeep(function(e,t,r){return e.invalid?e:t.touched&&t.invalid?{invalid:!0,error:t.error}:e},{invalid:!1,error:null},e,r)},t.sleep=function(e,t){return[new Promise(function(t,r){setTimeout(function(){t(null)},e)}),t]},t.startReordering=function(e,t,r,n){return[new Promise(function(a,o){n=i.setExtra(e,{itemPath:t,group:r,fulfill:a,reject:o},n)}),n]},t.endReordering=function(e,t){return i.getExtra(e,t)?i.setExtra(e,null,t):t},t.getReordering=function(e,t){var r=i.getExtra(e,t);return r?r.itemPath:null},t.openDialog=function(e,t,r){return[new Promise(function(n,a){r=i.setExtra(e,{data:t,fulfill:n,reject:a},r)}),r]},t.closeDialog=function(e,t){return i.getExtra(e,t)?i.setExtra(e,null,t):t},t.getDialog=function(e,t){var r=i.getExtra(e,t);return r?r.data:null},t.openFeedback=function(e,t,r){return i.setExtra(e,t,r)},t.closeFeedback=function(e,t){return i.getExtra(e,t)?i.setExtra(e,null,t):t},t.getFeedback=function(e,t){return i.getExtra(e,t)},t.setPage=function(e,t,r){return i.setExtra(e,t,r)},t.getPage=function(e,t){var r=i.getExtra(e,t);return null!==r?r:0},t.nextPage=function(e,t){var r=i.getExtra(e,t),n=null!==r?r:0;return i.setExtra(e,n+1,t)},t.prevPage=function(e,t){var r=i.getExtra(e,t),n=null!==r?r:0;return i.setExtra(e,n-1,t)},t.setSwitch=function(e,t,r){return i.setExtra(e,t,r)},t.getSwitch=function(e,t){var r=i.getExtra(e,t);return null!==r&&r},t.toggleSwitch=function(e,t){var r=i.getExtra(e,t),n=null!==r&&r;return i.setExtra(e,!n,t)},t.openProgress=function(e,t,r){return i.setExtra(e,{current:-1},r)},t.closeProgress=function(e,t){return i.setExtra(e,null,t)},t.getProgress=function(e,t){var r=i.getExtra(e,t);return r?r.current:null},t.reorder=function(e,r,n,a){var o=t.makePortal(a),u=o.enter;return(0,o.leave)(t.startReordering(e,r,n,a)).then(u(function(n,a){var o=n.path;return a=t.endReordering(e,a),t.move(r,o,a)}))},t.makePortal=function(e){return{enter:function(t){return function(r){var n=null;return e.onPromiseThen({result:r,handler:t,ret:function(e){n=e}}),n}},leave:function(e,t){var r=Array.isArray(e)?e[0]:e,n=Array.isArray(e)?e[1]:t;if(!i.isEnv(n))throw new Error("exit/1: env required");return i.doReturn(n),r}}}}(o=exports.API||(exports.API={}));var v={openDialog:o.openDialog,closeDialog:o.closeDialog,openFeedback:o.openFeedback,closeFeedback:o.closeFeedback,openProgress:o.openProgress,closeProgress:o.closeProgress,setPage:o.setPage,nextPage:o.nextPage,prevPage:o.prevPage,setSwitch:o.setSwitch,toggleSwitch:o.toggleSwitch,reorder:o.reorder},d=function(t){var r,n=t.data,o=t.schema,d=t.view,g=t.containerEl,f=t.evolve,p=void 0===f?null:f,h=t.updates,b=void 0===h?{}:h,E=t.rules,m=void 0===E?null:E,P=t.catalog,T=void 0===P?null:P;p||(p=function(e,t,r){return e});var x,S=l.validate(m||l.defaultRules),k=l.coerce,y=c.normalizeError(T||c.defaultErrorMessages),w=l.buildDb(o),U={onTextboxInput:function(t){return function(r,n){var a=t.currentTarget.dataset.mgPath,o=t.currentTarget[t.currentTarget.dataset.mgValueAttribute],u=i.getSlot(a,r.baseEnv),l=e(e({},u),{input:o}),c=i.setSlot(a,l,r.baseEnv),s=i.getSlot(a,r.env),v=e(e({},s),{input:o}),d=i.setSlot(a,v,r.env);return e(e({},r),{baseEnv:c,env:d})}},onTextboxBlur:function(t){return function(r,n){var a,o,l=t.currentTarget.dataset.mgPath,c=t.currentTarget[t.currentTarget.dataset.mgValueAttribute],s=(0,u.normalizePath)(l),v=e(e({},i.getSlot(l,r.baseEnv)),{touched:!0}),d=k(c,v,w[s]),g=i.beginUpdateTracking(r.baseEnv);g=i.setSlot(l,d,g),g=i.validate("",g),o=(a=i.endUpdateTracking(g))[0],g=a[1];var f=p(g,o,g);return f=i.validate("",f),e(e({},r),{baseEnv:g,env:f})}},onSliderInput:function(t){return function(r,n){var a=t.currentTarget.dataset.mgPath,o=t.currentTarget[t.currentTarget.dataset.mgValueAttribute],u=i.getSlot(a,r.baseEnv),l=e(e({},u),{input:o}),c=i.setSlot(a,l,r.baseEnv),s=i.getSlot(a,r.env),v=e(e({},s),{input:o}),d=i.setSlot(a,v,r.env);return e(e({},r),{baseEnv:c,env:d})}},onSliderChange:function(t){return function(r,n){var a,o,l=t.currentTarget.dataset.mgPath,c=t.currentTarget[t.currentTarget.dataset.mgValueAttribute],s=(0,u.normalizePath)(l),v=e(e({},i.getSlot(l,r.baseEnv)),{touched:!0}),d=k(c,v,w[s]),g=i.beginUpdateTracking(r.baseEnv);g=i.setSlot(l,d,g),g=i.validate("",g),o=(a=i.endUpdateTracking(g))[0],g=a[1];var f=p(g,o,r.env);return f=i.validate("",f),e(e({},r),{baseEnv:g,env:f})}},onListboxChange:function(t){return function(r,n){var a,o,l=t.currentTarget.dataset.mgPath,c=t.currentTarget[t.currentTarget.dataset.mgValueAttribute],s=(0,u.normalizePath)(l),v=e(e({},i.getSlot(l,r.baseEnv)),{touched:!0}),d=k(c,v,w[s]),g=i.beginUpdateTracking(r.baseEnv);g=i.setSlot(l,d,g),g=i.validate("",g),o=(a=i.endUpdateTracking(g))[0],g=a[1];var f=p(g,o,r.env);return f=i.validate("",f),e(e({},r),{baseEnv:g,env:f})}},onRadioChange:function(t){return function(r,n){var a,o,l=t.currentTarget.dataset.mgPath,c=t.currentTarget[t.currentTarget.dataset.mgValueAttribute],s=(0,u.normalizePath)(l),v=e(e({},i.getSlot(l,r.baseEnv)),{touched:!0}),d=k(c,v,w[s]),g=i.beginUpdateTracking(r.baseEnv);g=i.setSlot(l,d,g),g=i.validate("",g),o=(a=i.endUpdateTracking(g))[0],g=a[1];var f=p(g,o,r.env);return f=i.validate("",f),e(e({},r),{baseEnv:g,env:f})}},onCheckboxChange:function(t){return function(r,n){var a,o,l=t.currentTarget.dataset.mgPath,c=t.currentTarget[t.currentTarget.dataset.mgCheckedAttribute]?"true":"false",s=(0,u.normalizePath)(l),v=e(e({},i.getSlot(l,r.baseEnv)),{touched:!0}),d=k(c,v,w[s]),g=i.beginUpdateTracking(r.baseEnv);g=i.setSlot(l,d,g),g=i.validate("",g),o=(a=i.endUpdateTracking(g))[0],g=a[1];var f=p(g,o,r.env);return f=i.validate("",f),e(e({},r),{baseEnv:g,env:f})}},onSmartControlChange:function(t){return function(r,n){for(var a,o,l=Array.isArray(t)?t:[t],c=i.beginUpdateTracking(r.baseEnv),s=0;s<l.length;s++){var v=l[s],d=v.path,g=v.input,f=e(e({},i.getSlot(d,c)),{touched:!0}),h=k(g,f,w[(0,u.normalizePath)(d)]);c=i.setSlot(d,h,c)}c=i.validate("",c),o=(a=i.endUpdateTracking(c))[0],c=a[1];var b=p(c,o,r.env);return b=i.validate("",b),e(e({},r),{baseEnv:c,env:b})}},onUpdate:function(t){return function(r,n){var o,u,l="currentTarget"in t?t.currentTarget.dataset.mgUpdate:t.update,c="currentTarget"in t?JSON.parse(t.currentTarget.dataset.mgContext||"null"):t.context,s=i.beginUpdateTracking(r.baseEnv);s=i.setPortal(function(e){s=e},n.onPromiseThen,s);var d=b[l]||v[l];if(!d)throw new Error("onUpdate/0: no update or unknown update");if(!Array.isArray(c))throw new Error("onUpdate/1: parameter must be an array");if(c.length+1!=d.length)throw new Error("onUpdate/2: bad number of parameters");var g=d.apply(null,a(a([],c,!0),[s],!1));s=i.setPortal(null,null,i.isEnv(g)?g:s),s=i.validate("",s),u=(o=i.endUpdateTracking(s))[0],s=o[1];var f=r.env;return i.isSame(r.baseEnv,s)||(f=p(s,u,f),f=i.validate("",f)),e(e({},r),{baseEnv:s,env:f})}},onPromiseSettle:function(e){return function(t,r){var n="currentTarget"in e?e.currentTarget.dataset.mgName:e.name,a="currentTarget"in e?JSON.parse(e.currentTarget.dataset.mgResult||"null"):e.result,o=i.getExtra(n,t.baseEnv);if(!o||!o.fulfill)throw new Error("onPromiseSettle/0: no callback or unknown callback");return setTimeout(function(){o.fulfill(a)},0),null}},onPromiseThen:function(t){return function(r,n){var a,o,u=i.beginUpdateTracking(r.baseEnv);u=i.setPortal(function(e){u=e},n.onPromiseThen,u);var l=t.handler(t.result,u);u=i.setPortal(null,null,i.isEnv(l)?l:u),u=i.validate("",u),o=(a=i.endUpdateTracking(u))[0],u=a[1];var c=r.env;return i.isSame(r.baseEnv,u)||(c=p(u,o,c),c=i.validate("",c)),i.isEnv(l)||t.ret(l),e(e({},r),{baseEnv:u,env:c})}}},A=i.makeEnv(n,w,S,!0);A=i.validate("",A),x=(r=i.endUpdateTracking(A))[0],A=r[1];var D=p(A,x,null),_={baseEnv:A,env:D=i.validate("",D),normalizeError:y};return{onUpdate:(0,s.app)(_,U,function(e,t){return d(e.env)},g).onUpdate}};exports.start=d;var g=function(e){var t,r=e.data,n=e.schema,a=e.evolve,o=void 0===a?null:a,u=e.rules,c=void 0===u?null:u;o||(o=function(e,t,r){return e});var s,v=l.validate(c||l.defaultRules),d=l.buildDb(n),g=i.makeEnv(r,d,v,!0);g=i.validate("",g),s=(t=i.endUpdateTracking(g))[0];var f=o(g=t[1],s,null);return f=i.validate("",f)};exports.once=g,exports.h=s.h,console.log("here",o);
},{"./utils":"vZqM","./env":"bjtJ","./schema":"sokK","./errors":"D0Z0","hyperapp":"aft2"}],"Hj82":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addClass=exports.compose=exports.prepareToDestroy=exports.resumeRoot=exports.suspendRoot=exports.Children=exports.Component=exports.VNode=exports.UnmagicalAction=exports.UnmagicalActions=exports.UnmagicalState=exports.h=exports.API=void 0;var e=require("./framework");Object.defineProperty(exports,"API",{enumerable:!0,get:function(){return e.API}}),Object.defineProperty(exports,"h",{enumerable:!0,get:function(){return e.h}}),Object.defineProperty(exports,"UnmagicalState",{enumerable:!0,get:function(){return e.UnmagicalState}}),Object.defineProperty(exports,"UnmagicalActions",{enumerable:!0,get:function(){return e.UnmagicalActions}}),Object.defineProperty(exports,"UnmagicalAction",{enumerable:!0,get:function(){return e.UnmagicalAction}});var t=require("hyperapp");Object.defineProperty(exports,"VNode",{enumerable:!0,get:function(){return t.VNode}}),Object.defineProperty(exports,"Component",{enumerable:!0,get:function(){return t.Component}}),Object.defineProperty(exports,"Children",{enumerable:!0,get:function(){return t.Children}});var n=function(){var e=document.documentElement,t=+e.dataset.mgSuspendCount;!t||t<1?(e.dataset.mgSuspendCount="1",e.style.overflow="hidden"):e.dataset.mgSuspendCount=""+(t-1)};exports.suspendRoot=n;var r=function(){var e=document.documentElement,t=+e.dataset.mgSuspendCount;t<=1?(delete e.dataset.mgSuspendCount,e.style.overflow=null):e.dataset.mgSuspendCount=""+(t+1)};exports.resumeRoot=r;var o=function(e,t,n){var r=setTimeout(function(){n(),t.onfinish=null},800);t.onfinish=function(){n(),clearTimeout(r)}};exports.prepareToDestroy=o;var u=function(e,t){return function(n){return function(r,o){return function(u,s){var a=t(function(t,r){var o=e(n)(t,r);return"function"==typeof o?o(u,s):o})(r,o),i="function"==typeof a?a(u,s):a;if(i)return i;e(n)(r,o);return"function"==typeof a?a(u,s):a}}}};exports.compose=u;var s=function(e,t,n){n&&(e.hasOwnProperty(t)||(e[t]=""),e[t]+=" "+n)};exports.addClass=s;
},{"./framework":"Trba","hyperapp":"aft2"}],"z02d":[function(require,module,exports) {
"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o]);return r}).apply(this,arguments)},t=this&&this.__rest||function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(r);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(r,n[o])&&(e[n[o]]=r[n[o]])}return e},e=this&&this.__spreadArray||function(r,t,e){if(e||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return r.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.playTextbox=void 0;var n=require("../framework"),o=require("../components"),a=function(a){return function(i,l){return function(p,u){var s=i.path,c=t(i,["path"]),f=n.API.getSlot(s,p.env);if(!f)return null;var y=f.touched&&f.invalid||!1,v=r(r({},c),{"data-mg-path":s,"data-mg-value-attribute":"value",oninput:u.onTextboxInput,onblur:u.onTextboxBlur,value:f.input,invalid:y,message:f.error?p.normalizeError(f.error).message:""});return o.h.apply(void 0,e([a,v],l,!1))}}};exports.playTextbox=a;
},{"../framework":"Trba","../components":"Hj82"}],"LJBB":[function(require,module,exports) {
"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o]);return r}).apply(this,arguments)},t=this&&this.__rest||function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(r);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(r,n[o])&&(e[n[o]]=r[n[o]])}return e},e=this&&this.__spreadArray||function(r,t,e){if(e||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return r.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.playListbox=void 0;var n=require("../framework"),o=require("../components"),a=function(a){return function(i,l){return function(s,p){var u=i.path,c=t(i,["path"]),f=n.API.getSlot(u,s.env);if(!f)return null;var y=f.touched&&f.invalid||!1,h=r(r({},c),{"data-mg-path":u,"data-mg-value-attribute":"value",onchange:p.onListboxChange,invalid:y,message:f.error?s.normalizeError(f.error).message:"",value:f.input});return o.h.apply(void 0,e([a,h],l,!1))}}};exports.playListbox=a;
},{"../framework":"Trba","../components":"Hj82"}],"odCM":[function(require,module,exports) {
"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(r){for(var e,t=1,a=arguments.length;t<a;t++)for(var n in e=arguments[t])Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}).apply(this,arguments)},e=this&&this.__rest||function(r,e){var t={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&e.indexOf(a)<0&&(t[a]=r[a]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(r);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(r,a[n])&&(t[a[n]]=r[a[n]])}return t},t=this&&this.__spreadArray||function(r,e,t){if(t||2===arguments.length)for(var a,n=0,o=e.length;n<o;n++)!a&&n in e||(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.playRadio=void 0;var a=require("../framework"),n=require("../components"),o=function(o){return function(i,l){return function(p,u){var s=i.path,c=i.value,v=e(i,["path","value"]),f=a.API.getSlot(s,p.env);if(!f)return null;var h=f.touched&&f.invalid||!1,y=r(r({},v),{"data-mg-path":s,"data-mg-value-attribute":"value",onchange:u.onRadioChange,checked:c==f.value,invalid:h,message:f.error?p.normalizeError(f.error).message:"",value:c});return n.h.apply(void 0,t([o,y],l,!1))}}};exports.playRadio=o;
},{"../framework":"Trba","../components":"Hj82"}],"dzA6":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)},r=this&&this.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(t[n[o]]=e[n[o]])}return t},t=this&&this.__spreadArray||function(e,r,t){if(t||2===arguments.length)for(var n,o=0,a=r.length;o<a;o++)!n&&o in r||(n||(n=Array.prototype.slice.call(r,0,o)),n[o]=r[o]);return e.concat(n||Array.prototype.slice.call(r))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.playCheckbox=void 0;var n=require("../framework"),o=require("../components"),a=function(a){return function(i,c){return function(l,p){var s=i.path,u=r(i,["path"]),h=n.API.getSlot(s,l.env);if(!h)return null;var f=h.touched&&h.invalid||!1,y=e(e({},u),{"data-mg-path":s,"data-mg-checked-attribute":"checked",onchange:p.onCheckboxChange,checked:h.value,invalid:f,message:h.error?l.normalizeError(h.error).message:""});return o.h.apply(void 0,t([a,y],c,!1))}}};exports.playCheckbox=a;
},{"../framework":"Trba","../components":"Hj82"}],"wQrI":[function(require,module,exports) {
"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r}).apply(this,arguments)},e=this&&this.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(r);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(r,n[o])&&(t[n[o]]=r[n[o]])}return t},t=this&&this.__spreadArray||function(r,e,t){if(t||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return r.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.playField=void 0;var n=require("../framework"),o=require("../components"),i=function(i){return function(a,l){return function(s,p){var c=a.path,u=a.foldValidity,f=void 0!==u&&u,y=e(a,["path","foldValidity"]);if(!n.API.test(c,s.env))return null;var d=n.API.getSlot(c,s.env),v=f?n.API.foldValidity(c,s.env):{invalid:d.invalid&&d.touched,error:d.error},h=v.invalid,O=v.error,g=r(r({},y),{invalid:h,message:O?s.normalizeError(O).message:""});return o.h.apply(void 0,t([i,g],l,!1))}}};exports.playField=i;
},{"../framework":"Trba","../components":"Hj82"}],"a0sZ":[function(require,module,exports) {
"use strict";var t=this&&this.__assign||function(){return(t=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},e=this&&this.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},r=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,a=e.length;o<a;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.playUpdateButton=void 0;var n=require("../components"),o=function(o){return function(a,i){return function(p,c){var l=a.update,s=a.context,u=e(a,["update","context"]),y=t(t({},u),{"data-mg-update":l,"data-mg-context":JSON.stringify(void 0===s?null:s),onclick:c.onUpdate});return n.h.apply(void 0,r([o,y],i,!1))}}};exports.playUpdateButton=o;
},{"../components":"Hj82"}],"XkMV":[function(require,module,exports) {
"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r}).apply(this,arguments)},e=this&&this.__spreadArray||function(r,e,t){if(t||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return r.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.playProgress=void 0;var t=require("../framework"),n=require("../components"),o=function(o){return function(i){return function(s,a){return function(l,u){var c=s,p=c.name,f=t.API.getProgress(p,l.env);if(null===f&&o)return null;var v=r(r({},c),{shown:null!==f,current:null===f?void 0:f});return n.h.apply(void 0,e([i,v],a,!1))}}}};exports.playProgress=o;
},{"../framework":"Trba","../components":"Hj82"}],"kBJ3":[function(require,module,exports) {
"use strict";var t=this&&this.__assign||function(){return(t=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},e=this&&this.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},r=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,a=e.length;o<a;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.playSettleButton=void 0;var n=require("../components"),o=function(o){return function(a,i){return function(l,s){var p=a.name,c=a.result,u=e(a,["name","result"]),y=t(t({},u),{"data-mg-name":p,"data-mg-result":JSON.stringify(void 0===c?null:c),onclick:s.onPromiseSettle});return n.h.apply(void 0,r([o,y],i,!1))}}};exports.playSettleButton=o;
},{"../components":"Hj82"}],"QblQ":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var r,t=1,o=arguments.length;t<o;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},r=this&&this.__spreadArray||function(e,r,t){if(t||2===arguments.length)for(var o,a=0,n=r.length;a<n;a++)!o&&a in r||(o||(o=Array.prototype.slice.call(r,0,a)),o[a]=r[a]);return e.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.playDialog=exports.dialogOnRemove=exports.dialogOnCreate=void 0;var t=require("../framework"),o=require("../components");exports.dialogOnCreate={fade:function(e){(0,o.suspendRoot)(),e.animate([{opacity:0},{opacity:1}],200)},scale:function(e){(0,o.suspendRoot)(),e.animate([{transform:"scale(0.8)"},{transform:"scale(1)"}])}},exports.dialogOnRemove={fade:function(e,r){(0,o.resumeRoot)();var t=e.animate([{opacity:1},{opacity:0}],200);(0,o.prepareToDestroy)(e,t,r)},scale:function(e,r){(0,o.resumeRoot)();var t=e.animate([{transform:"scale(1)"},{transform:"scale(0.8)"}],200);(0,o.prepareToDestroy)(e,t,r)}};var a=function(a,n){return function(i){return function(s,l){return function(p,c){var u=s,f=u.name,v=t.API.getDialog(f,p.env);if(n&&null===v)return null;var y=e(e({},u),{data:v,oncreate:exports.dialogOnCreate[a],onremove:exports.dialogOnRemove[a],shown:null!==v});return o.h.apply(void 0,r([i,y],l,!1))}}}};exports.playDialog=a;
},{"../framework":"Trba","../components":"Hj82"}],"Nct2":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},t=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},r=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.playFeedback=void 0;var n=require("../framework"),o=require("../components"),a={fade:function(e){e.animate([{opacity:0},{opacity:1}],200),e.scrollIntoView()},zoom:function(e){e.animate([{transform:"scale(0.8)"},{transform:"scale(1)"}],200),e.scrollIntoView()},slide:function(e){var t=e.getBoundingClientRect();e.animate([{offset:0,maxHeight:0},{offset:.999,maxHeight:1.2*t.height+30+"px"},{offset:1,maxHeight:"none"}],200),e.scrollIntoView()}},i={fade:function(e,t){var r=e.animate([{opacity:1},{opacity:0}],200);(0,o.prepareToDestroy)(e,r,t)},zoom:function(e,t){var r=e.animate([{transform:"scale(1)"},{transform:"scale(0.8)"}],200);(0,o.prepareToDestroy)(e,r,t)},slide:function(e,t){var r=e.getBoundingClientRect(),n=e.animate([{maxHeight:1.2*r.height+30+"px"},{maxHeight:0}],200);(0,o.prepareToDestroy)(e,n,t)}},c=function(c,l){return function(s){return function(u,f){return function(p,m){var y=u.duration,d=void 0===y?0:y,h=t(u,["duration"]),v=h.name,g=n.API.getFeedback(v,p.env);if(l&&null===g)return null;var b=e(e({},h),{data:"code"in g?p.normalizeError(g):g,shown:null!==g,oncreate:a[c],onremove:i[c]});if(d>0){var x=null,O=b.oncreate;b.oncreate=function(e){x=setTimeout(function(){return m.onUpdate({update:"closeFeedback",context:[v]})},d),O&&O(e)};var w=b.onremove;b.onremove=function(e,t){x&&clearTimeout(x),w&&w(e,t)}}return o.h.apply(void 0,r([s,b],f,!1))}}}};exports.playFeedback=c;
},{"../framework":"Trba","../components":"Hj82"}],"elBN":[function(require,module,exports) {
"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r}).apply(this,arguments)},e=this&&this.__spreadArray||function(r,e,t){if(t||2===arguments.length)for(var n,o=0,a=e.length;o<a;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return r.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.playModal=void 0;var t=require("../components"),n=require("./dialog"),o=function(o,a){return function(i){return function(l,s){return function(u,c){var p=l;if(!p.shown&&a)return null;var f=r(r({},p),{oncreate:n.dialogOnCreate[o],onremove:n.dialogOnRemove[o]});return t.h.apply(void 0,e([i,f],s,!1))}}}};exports.playModal=o;
},{"../components":"Hj82","./dialog":"QblQ"}],"A5j0":[function(require,module,exports) {
"use strict";var t=this&&this.__assign||function(){return(t=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var i in r=arguments[e])Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);return t}).apply(this,arguments)},r=this&&this.__rest||function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]])}return e},e=this&&this.__spreadArray||function(t,r,e){if(e||2===arguments.length)for(var n,i=0,l=r.length;i<l;i++)!n&&i in r||(n||(n=Array.prototype.slice.call(r,0,i)),n[i]=r[i]);return t.concat(n||Array.prototype.slice.call(r))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.playPagination=void 0;var n=require("../framework"),i=require("../components"),l=function(t,r,e,n){for(var i=[],l=t-r;l<=t+r;l++)l<e||l>n||i.push(l);return i},o=function(o){return function(a,p){return function(s,u){var c=a.listPath,y=a.width,f=void 0===y?2:y,h=a.pageProperty,v=void 0===h?"page":h,P=a.limitProperty,g=void 0===P?"limit":P,d=r(a,["listPath","width","pageProperty","limitProperty"]),O=n.API.extract(c+"/query",s.env),b=+n.API.extract(c+"/totalCount",s.env),x=O[v];if(b>0){var m=Math.ceil(b/O[g]),_=l(x,f,1,m),j=t(t({},d),{listPath:c,current:x,prev:1<x?x-1:null,next:x<m?x+1:null,first:1<x-f?1:null,last:x+f<m?m:null,siblings:_});return i.h.apply(void 0,e([o,j],p,!1))}j=t(t({},d),{listPath:c,current:null,prev:null,next:null,first:null,last:null,siblings:[]});return i.h.apply(void 0,e([o,j],p,!1))}}};exports.playPagination=o;
},{"../framework":"Trba","../components":"Hj82"}],"A7gL":[function(require,module,exports) {
"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o]);return r}).apply(this,arguments)},t=this&&this.__rest||function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(r);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(r,n[o])&&(e[n[o]]=r[n[o]])}return e},e=this&&this.__spreadArray||function(r,t,e){if(e||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return r.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.playFlatpickr=void 0;var n=require("../framework"),o=require("../components"),a=function(t,e,n,o,a){var i=null;return{oncreate:function(l){var c=r(r({},a),{defaultDate:n||null});if((i=flatpickr(l,c)).config.onChange.push(function(r,n){e({path:t,input:n})}),o){var u=document.getElementById(o);u&&(u.onclick=i.clear)}},ondestroy:function(r){i&&(i.destroy(),i=null)}}},i=function(i){return function(l,c){return function(u,p){var s=l.path,f=l.clearerId,y=void 0===f?null:f,d=l.config,h=void 0===d?{}:d,v=t(l,["path","clearerId","config"]),g=n.API.getSlot(s,u.env);if(!g)return null;var O=a(s,p.onSmartControlChange,g.input,y,h),m=O.oncreate,b=O.ondestroy,_=g.touched&&g.invalid||!1,j=r(r({},v),{invalid:_,message:g.error?u.normalizeError(g.error).message:"",oncreate:m,ondestroy:b});return o.h.apply(void 0,e([i,j],c,!1))}}};exports.playFlatpickr=i;
},{"../framework":"Trba","../components":"Hj82"}],"lRBK":[function(require,module,exports) {
"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o]);return r}).apply(this,arguments)},t=this&&this.__rest||function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(r);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(r,n[o])&&(e[n[o]]=r[n[o]])}return e},e=this&&this.__spreadArray||function(r,t,e){if(e||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return r.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.playPickr=void 0;var n=require("../framework"),o=require("../components"),i=function(t,e,n,o,i){var a=null;return{oncreate:function(l){var u=r(r({},i),{useAsButton:!0,default:n||null,el:l});if((a=Pickr.create(u)).on("clear",function(){e({path:t,input:""})}).on("save",function(r){var n=r?r.toHEXA().toString():null;a.hide(),e({path:t,input:n})}),o){var c=document.getElementById(o);c&&(c.onclick=function(r){a.setColor(null)})}},ondestroy:function(r){a&&(a.destroy(),a=null)}}},a=function(a){return function(l,u){return function(c,s){var p=l.path,f=l.clearerId,y=void 0===f?null:f,v=l.options,d=void 0===v?{}:v,h=t(l,["path","clearerId","options"]),g=n.API.getSlot(p,c.env);if(!g)return null;var O=i(p,s.onSmartControlChange,g.input,y,d),m=O.oncreate,b=O.ondestroy,P=g.touched&&g.invalid||!1,_=r(r({},h),{value:g.input,invalid:P,message:g.error?c.normalizeError(g.error).message:"",oncreate:m,ondestroy:b});return o.h.apply(void 0,e([a,_],u,!1))}}};exports.playPickr=a;
},{"../framework":"Trba","../components":"Hj82"}],"bzzh":[function(require,module,exports) {
"use strict";var t=this&&this.__assign||function(){return(t=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},e=this&&this.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},r=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,a=e.length;o<a;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.playSortable=void 0;var n=require("../framework"),o=require("../components"),a=function(e,r,n,o){var a=null,i=null,l=null,p=t(t({},o),{onStart:function(t){var n=t.from.dataset.mgPath;i=t.item.nextElementSibling,r({update:"reorder",context:[e,n+"/"+t.oldIndex,l]})},onEnd:function(t){setTimeout(function(){t.from.insertBefore(t.item,i),i=null},0);var r=t.to.dataset.mgPath;n({name:e,result:{path:r+"/"+t.newIndex}})}});return{oncreate:function(t){a=Sortable.create(t,p),l=a.option("group").name},ondestroy:function(){a&&(a.destroy(),a=null)}}},i=function(i){return function(l,p){return function(u,s){var c=l.name,f=l.path,y=l.options,d=void 0===y?{}:y,h=e(l,["name","path","options"]),m=n.API.getExtra(c,u.env),v=!!m,g=a(c,s.onUpdate,s.onPromiseSettle,d),b=g.oncreate,O=g.ondestroy,P=t(t({},h),{"data-mg-path":f,active:v,itemPath:m?m.itemPath:"",group:m?m.group:"",oncreate:b,ondestroy:O});return o.h.apply(void 0,r([i,P],p,!1))}}};exports.playSortable=i;
},{"../framework":"Trba","../components":"Hj82"}],"mdXH":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=this&&this.__assign||function(){return(t=Object.assign||function(e){for(var t,a=1,s=arguments.length;a<s;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,a,s){void 0===s&&(s=a),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,s){void 0===s&&(s=a),e[s]=t[a]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&a(t,e,o);return s(t,e),t},r=this&&this.__rest||function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(a[s[o]]=e[s[o]])}return a},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReorderableMenuList=exports.ColorPicker=exports.DatePicker=exports.Pagination=exports.Modal=exports.Progress=exports.Notification=exports.Dialog=exports.SettleButton=exports.Clickable=exports.DeleteButton=exports.UpdateButton=exports.Field=exports.Checkbox=exports.Radio=exports.Select=exports.Textarea=exports.Input=exports.h=exports.start=exports.API=void 0;var l=n(require("string-template")),i=o(require("../core/components")),c=require("../core/framework"),u=require("../core/framework");Object.defineProperty(exports,"API",{enumerable:!0,get:function(){return u.API}}),Object.defineProperty(exports,"start",{enumerable:!0,get:function(){return u.start}}),Object.defineProperty(exports,"h",{enumerable:!0,get:function(){return u.h}});var d=require("../core/hocs/textbox");exports.Input=(0,d.playTextbox)(function(e){var a=e.invalid,s=(e.message,e.class),o=void 0===s?"":s,n=r(e,["invalid","message","class"]);return o+=" input",a&&(o+=" is-danger"),(0,c.h)("input",t({},n,{class:o}))}),exports.Textarea=(0,d.playTextbox)(function(e){var a=e.invalid,s=(e.message,e.class),o=void 0===s?"":s,n=r(e,["invalid","message","class"]);return o+=" textarea",a&&(o+=" is-danger"),(0,c.h)("textarea",t({},n,{class:o}))});var p=require("../core/hocs/listbox"),h=function a(s,o){return o.map(function(o){if("object"!=e(o))return o;var r=o.children&&o.children.length?a(s,o.children):o.children;return"value"in o.attributes?t(t({},o),{selected:o.attributes.value==s,children:r}):t(t({},o),{children:r})})};exports.Select=(0,p.playListbox)(function(e,a){var s=e.onchange,o=e["data-mg-path"],n=e["data-mg-value-attribute"],l=e.invalid,i=(e.message,e.value),u=e.disabled,d=void 0!==u&&u,p=e.class,v=void 0===p?"":p,b=e.inputProps,g=void 0===b?{}:b,m=r(e,["onchange","data-mg-path","data-mg-value-attribute","invalid","message","value","disabled","class","inputProps"]);return v+=" select",l&&(v+=" is-danger"),(0,c.h)("div",t({},m,{class:v}),(0,c.h)("select",t({},g,{onchange:s,"data-mg-path":o,"data-mg-value-attribute":n,disabled:d}),h(i,a)))});var v=require("../core/hocs/radio");exports.Radio=(0,v.playRadio)(function(e,a){var s=e.checked,o=e.onchange,n=e["data-mg-path"],l=e["data-mg-value-attribute"],i=(e.invalid,e.message,e.value),u=e.disabled,d=void 0!==u&&u,p=e.name,h=void 0===p?null:p,v=e.inputProps,b=void 0===v?{}:v,g=e.class,m=void 0===g?"":g,f=r(e,["checked","onchange","data-mg-path","data-mg-value-attribute","invalid","message","value","disabled","name","inputProps","class"]);return m+=" radio",null===h&&(h=n),(0,c.h)("label",t({},f,{disabled:d,class:m}),(0,c.h)("input",t({},b,{type:"radio",onchange:o,"data-mg-path":n,"data-mg-value-attribute":l,name:h,disabled:d,checked:s,value:i})),a)});var b=require("../core/hocs/checkbox");exports.Checkbox=(0,b.playCheckbox)(function(e,a){var s=e.checked,o=e.onchange,n=e["data-mg-path"],l=e["data-mg-checked-attribute"],i=(e.invalid,e.message,e.disabled),u=void 0!==i&&i,d=e.inputProps,p=void 0===d?{}:d,h=e.class,v=void 0===h?"":h,b=r(e,["checked","onchange","data-mg-path","data-mg-checked-attribute","invalid","message","disabled","inputProps","class"]);return v+=" checkbox",(0,c.h)("label",t({},b,{disabled:u,class:v}),(0,c.h)("input",t({},p,{type:"checkbox",onchange:o,"data-mg-path":n,"data-mg-checked-attribute":l,disabled:u,checked:s})),a)});var g=require("../core/hocs/field");exports.Field=(0,g.playField)(function(e,a){var s=e.invalid,o=e.message,n=e.label,l=void 0===n?"":n,i=e.class,u=void 0===i?"":i,d=r(e,["invalid","message","label","class"]);return u+=" field",(0,c.h)("div",t({},d,{class:u}),l?(0,c.h)("label",{class:"label"},l):null,a,s&&o?(0,c.h)("p",{class:"help is-danger"},o):null)});var m=require("../core/hocs/updateButton"),f=require("../core/hocs/progress");exports.UpdateButton=i.compose(m.playUpdateButton,(0,f.playProgress)(!1))(function(e,a){var s=e.shown,o=e.class,n=void 0===o?"":o,l=r(e,["shown","class"]);return n+=" button",s&&(n+=" is-loading"),(0,c.h)("button",t({},l,{class:n}),a)}),exports.DeleteButton=(0,m.playUpdateButton)(function(e,a){var s=e.class,o=void 0===s?"":s,n=r(e,["class"]);return o+=" delete",(0,c.h)("button",t({},n,{class:o}),a)}),exports.Clickable=(0,m.playUpdateButton)("a");var x=require("../core/hocs/settleButton");exports.SettleButton=(0,x.playSettleButton)(function(e,a){var s=e.class,o=void 0===s?"":s,n=r(e,["class"]);return o+=" button",(0,c.h)("button",t({},n,{class:o}),a)});var y=require("../core/hocs/dialog");exports.Dialog=(0,y.playDialog)("fade",!0)(function(e){var a=e.data,s=e.name,o=(e.shown,e.title),n=e.message,i=e.hideCancelButton,u=void 0!==i&&i,d=e.okLabel,p=void 0===d?"OK":d,h=e.cancelLabel,v=void 0===h?"Cancel":h,b=e.class,g=void 0===b?"":b,m=r(e,["data","name","shown","title","message","hideCancelButton","okLabel","cancelLabel","class"]),f=(0,l.default)(n,a);return g+=" modal is-active",console.log("Dialog",s,m),(0,c.h)("div",t({},m,{key:s,class:g}),(0,c.h)("div",{class:"modal-background"}),(0,c.h)("div",{class:"modal-card"},(0,c.h)("header",{class:"modal-card-head"},(0,c.h)("p",{class:"modal-card-title"},o)),(0,c.h)("section",{class:"modal-card-body"},(0,c.h)("p",null,f)),(0,c.h)("footer",{class:"modal-card-foot"},(0,c.h)(exports.SettleButton,{class:"button is-success",name:s,result:!0},p),u?null:(0,c.h)(exports.SettleButton,{class:"button",name:s,result:!1},v))))});var k=require("../core/hocs/feedback");exports.Notification=(0,k.playFeedback)("slide",!0)(function(e){var a=e.name,s=e.data,o=(e.shown,e.message),n=e.class,i=void 0===n?"":n,u=r(e,["name","data","shown","message","class"]),d=(0,l.default)(o,s);return i+=" notification",(0,c.h)("div",t({},u,{key:a,class:i}),(0,c.h)(exports.DeleteButton,{update:"closeFeedback",context:[a]}),(0,c.h)("p",null,d))}),exports.Progress=(0,f.playProgress)(!0)(function(e){var a=e.current,s=(e.name,e.shown,e.class),o=void 0===s?"":s,n=r(e,["current","name","shown","class"]);return o+=" pregress",(0,c.h)("progress",t({},n,{class:o,value:a}),"indeterminated")});var P=require("../core/hocs/modal");exports.Modal=(0,P.playModal)("fade",!0)(function(e,a){var s=e.class,o=void 0===s?"":s,n=r(e,["class"]);return o+=" modal is-active",(0,c.h)("div",t({},n,{class:o}),(0,c.h)("div",{class:"modal-background"}),a)});var O=require("../core/hocs/pagination");exports.Pagination=(0,O.playPagination)(function(e){var a=e.current,s=e.prev,o=e.next,n=e.first,l=e.last,i=e.siblings,u=e.listPath,d=e.prevLabel,p=void 0===d?"Previous":d,h=e.nextLabel,v=void 0===h?"Next":h,b=e.loadItemsOptions,g=void 0===b?{}:b,m=r(e,["current","prev","next","first","last","siblings","listPath","prevLabel","nextLabel","loadItemsOptions"]);return(0,c.h)("nav",t({},m,{class:"pagination",role:"navigation","aria-label":"pagination"}),(0,c.h)(exports.Clickable,{class:"pagination-previous",update:"loadItems",context:[u,t(t({},g),{page:s})],disabled:!s},p),(0,c.h)(exports.Clickable,{class:"pagination-next",update:"loadItems",context:[u,t(t({},g),{page:o})],disabled:!o},v),(0,c.h)("ul",{class:"pagination-list"},n?(0,c.h)("li",null,(0,c.h)(exports.Clickable,{class:"pagination-link",update:"loadItems",context:[u,t(t({},g),{page:n})]},n)):null,n?(0,c.h)("li",null,(0,c.h)("span",{class:"pagination-ellipsis"},"…")):null,i.map(function(e){return(0,c.h)("li",null,(0,c.h)(exports.Clickable,{class:"pagination-link "+(e==a?"is-current":""),update:"loadItems",context:[u,t(t({},g),{page:e})]},e))}),l?(0,c.h)("li",null,(0,c.h)("span",{class:"pagination-ellipsis"},"…")):null,l?(0,c.h)("li",null,(0,c.h)(exports.Clickable,{class:"pagination-link",update:"loadItems",context:[u,t(t({},g),{page:l})]},l)):null))});var q=require("../core/hocs/flatpickr");exports.DatePicker=(0,q.playFlatpickr)(function(e){var a=e.invalid,s=(e.message,e.class),o=void 0===s?"":s,n=r(e,["invalid","message","class"]);return o+=" input",a&&(o+=" is-danger"),(0,c.h)("input",t({},n,{type:"text",class:o}))});var B=require("../core/hocs/pickr");exports.ColorPicker=(0,B.playPickr)(function(e){e.invalid,e.message;var a=e.value,s=e.iconClass,o=void 0===s?"material-icons":s,n=e.iconText,l=void 0===n?"palette":n,i=e.class,u=void 0===i?"":i,d=r(e,["invalid","message","value","iconClass","iconText","class"]);return u+=" button",(0,c.h)("button",t({},d,{type:"button",class:u}),(0,c.h)("span",{class:"icon"},(0,c.h)("i",{class:o,style:{color:a}},l)))});var _=require("../core/hocs/sortable");exports.ReorderableMenuList=(0,_.playSortable)(function(e,a){e.active;var s=e.itemPath,o=e.group,n=e.showItem,l=void 0===n?null:n,i=e.items,u=void 0===i?null:i,d=r(e,["active","itemPath","group","showItem","items"]);return console.log("ReorderableMenuList",l,u),(0,c.h)("ul",t({},d),l&&u?u.map(function(e,t){return l(e,t,s,o)}):a)});
},{"string-template":"meBh","../core/components":"Hj82","../core/framework":"Trba","../core/hocs/textbox":"z02d","../core/hocs/listbox":"LJBB","../core/hocs/radio":"odCM","../core/hocs/checkbox":"dzA6","../core/hocs/field":"wQrI","../core/hocs/updateButton":"a0sZ","../core/hocs/progress":"XkMV","../core/hocs/settleButton":"kBJ3","../core/hocs/dialog":"QblQ","../core/hocs/feedback":"Nct2","../core/hocs/modal":"elBN","../core/hocs/pagination":"A5j0","../core/hocs/flatpickr":"A7gL","../core/hocs/pickr":"lRBK","../core/hocs/sortable":"bzzh"}],"mRZ3":[function(require,module,exports) {
"use strict";var t=this&&this.__assign||function(){return(t=Object.assign||function(t){for(var o,e=1,r=arguments.length;e<r;e++)for(var n in o=arguments[e])Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRestRepository=void 0;var o=require("./utils"),e=function(t){var o=t.status+" "+t.statusText,e=new Error(o);return e.name="http."+t.status,e},r=function(r,n){void 0===n&&(n={});var i=t({idProperty:"id",omitEmptyQueryParam:!0,totalCountHeader:"X-Total-Count",optionsForSearch:{},optionsForAdd:{},optionsForUpdate:{},optionsForRemove:{}},n);return{search:function(n){var a=t(t({method:"GET",mode:"cors"},i.optionsForSearch),{headers:t({"Content-Type":"application/json"},i.optionsForSearch.headers||{})}),s=new URLSearchParams((0,o.normalizeQuery)(n,i.omitEmptyQueryParam)),p=r+"?"+s.toString();return fetch(p,a).then(function(t){if(!t.ok)throw e(t);return t.json().then(function(o){return{entities:o,totalCount:+t.headers.get(i.totalCountHeader)}})})},add:function(o){var n=t(t({method:"POST",mode:"cors"},i.optionsForAdd),{headers:t({"Content-Type":"application/json"},i.optionsForAdd.headers||{}),body:JSON.stringify(o)});return fetch(r,n).then(function(t){if(!t.ok)throw e(t);return t.json()})},replace:function(o){var n=t(t({method:"PUT",mode:"cors"},i.optionsForUpdate),{headers:t({"Content-Type":"application/json"},i.optionsForUpdate.headers||{}),body:JSON.stringify(o)}),a=r+"/"+o[i.idProperty];return fetch(a,n).then(function(t){if(!t.ok)throw e(t);return t.json()})},remove:function(o){var n=t(t({method:"DELETE",mode:"cors"},i.optionsForRemove),{headers:t({"Content-Type":"application/json"},i.optionsForRemove.headers||{})}),a=r+"/"+o[i.idProperty];return fetch(a,n).then(function(t){if(!t.ok)throw e(t)})}}};exports.createRestRepository=r;
},{"./utils":"vZqM"}],"Ymvu":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var r,t=1,a=arguments.length;t<a;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeEntityUpdates=exports.makeEntityListUpdates=void 0;var r=require("./framework"),t=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},a=function(e,r){if(""==e)return r;var a={};for(var o in r)a[e+t(o)]=r[o];return a},o=function(t,o){return void 0===o&&(o=""),a(o,{editItem:function(e,t,a){var o={method:"replace",data:r.API.extract(e,a)};return r.API.add(t,o,a)},createItem:function(e,t,a){var o={method:"add",data:e};return r.API.add(t,o,a)},commitItem:function(a,o,n,l){var c=r.API.makePortal(l),i=c.enter,u=c.leave,s=e({errorSelector:null,loadingName:"loading",successName:"success",failureName:"failure"},n),P=a+"/method",d=a+"/data",m=o+"/query",I=o+"/items",A=o+"/totalCount";if(l=r.API.touchAll(d,l),l=r.API.validate(d,l),r.API.countValidationErrors(d,l))return s.errorSelector&&window.setTimeout(function(){var e=document.querySelector(s.errorSelector);e&&e.scrollIntoView()},100),l;l=r.API.openProgress(s.loadingName,null,l);var f=r.API.extract(d,l),p=r.API.extract(P,l);return u(t[p](f),l).then(i(function(e,a){var o=r.API.extract(m,a);return u(t.search(o),a)})).then(i(function(e,t){var o=e.entities,n=e.totalCount;return t=r.API.replace(I,o,t),t=r.API.replace(a,null,t),t=r.API.replace(A,n,t),t=r.API.closeProgress(s.loadingName,t),u(r.API.sleep(500,t))})).then(i(function(e,t){return r.API.openFeedback(s.successName,{},t)})).catch(i(function(e,t){t=r.API.closeProgress(s.loadingName,t),console.error("commision failed",e);var a={code:e.name,detail:e.message};return r.API.openFeedback(s.failureName,a,t)}))},discardItem:function(e,t){return t=r.API.replace(e,null,t)},deleteItem:function(a,o,n,l){var c=r.API.makePortal(l),i=c.enter,u=c.leave,s=e({confirmName:"confirm",loadingName:"loading",successName:"success",failureName:"failure"},n),P=o+"/query",d=o+"/items",m=o+"/totalCount";return u(r.API.openDialog(s.confirmName,{},l)).then(i(function(e,o){var n=r.API.extract(a,o);return o=r.API.closeDialog(s.confirmName,o),e?(o=r.API.openProgress(s.loadingName,null,o),u(t.remove(n),o).then(i(function(e,a){var o=r.API.extract(P,a);return u(t.search(o),a)})).then(i(function(e,t){var a=e.entities,o=e.totalCount;return t=r.API.closeProgress(s.loadingName,t),t=r.API.replace(d,a,t),t=r.API.replace(m,o,t),u(r.API.sleep(500,t))})).then(i(function(e,t){return r.API.openFeedback(s.successName,{},t)})).catch(i(function(e,t){t=r.API.closeProgress(s.loadingName,t),console.error("deletion failed",e);var a={code:e.name,detail:e.message};return r.API.openFeedback(s.failureName,a,t)}))):o}))},loadItems:function(a,o,n){var l=r.API.makePortal(n),c=l.enter,i=l.leave,u=e({loadingName:"loading",failureName:"failure",page:null,pageProperty:null},o),s=a+"/query",P=a+"/items",d=a+"/totalCount";n=r.API.openProgress(u.loadingName,null,n);var m=r.API.extract(s,n);return null!==u.page&&u.pageProperty&&(m[u.pageProperty]=u.page),i(t.search(m),n).then(c(function(e,t){var a=e.entities,o=e.totalCount;return t=r.API.closeProgress(u.loadingName,t),null!==u.page&&u.pageProperty&&(t=r.API.replace(s+"/"+u.pageProperty,u.page,t)),t=r.API.replace(P,a,t),t=r.API.replace(d,o,t)})).catch(c(function(e,t){t=r.API.closeProgress(u.loadingName,t),console.error("loading failed",e);var a={code:e.name,detail:e.message};return r.API.openFeedback(u.failureName,a,t)}))},searchItems:function(a,o,n,l){var c=null;if("errorSelector"in n&&(c=n.errorSelector,delete n.errorSelector),l=r.API.touchAll(a,l),l=r.API.validate(a,l),r.API.countValidationErrors(a,l))return c&&window.setTimeout(function(){var e=document.querySelector(c);e&&e.scrollIntoView()},100),l;var i=r.API.makePortal(l),u=i.enter,s=i.leave,P=e({loadingName:"loading",failureName:"failure"},n),d=o+"/query",m=o+"/items",I=o+"/totalCount";l=r.API.openProgress(P.loadingName,null,l);var A=r.API.extract(a,l);return s(t.search(A),l).then(u(function(e,t){var a=e.entities,o=e.totalCount;return t=r.API.closeProgress(P.loadingName,t),t=r.API.replace(d,A,t),t=r.API.replace(m,a,t),t=r.API.replace(I,o,t)})).catch(u(function(e,t){t=r.API.closeProgress(P.loadingName,t),console.error("search failed",e);var a={code:e.name,detail:e.message};return r.API.openFeedback(P.failureName,a,t)}))}})};exports.makeEntityListUpdates=o;var n=function(t,o){return void 0===o&&(o=""),a(o,{submit:function(a,o,n){var l=r.API.makePortal(n),c=l.enter,i=l.leave,u=e({path:"",errorSelector:null,loadingName:"loading",successName:"success",failureName:"failure"},o);if(n=r.API.touchAll(u.path,n),n=r.API.validate(u.path,n),r.API.countValidationErrors(u.path,n))return u.errorSelector&&window.setTimeout(function(){var e=document.querySelector(u.errorSelector);e&&e.scrollIntoView()},100),n;var s=r.API.extract(u.path,n);return n=r.API.openProgress(u.loadingName,null,n),i(t[a](s),n).then(c(function(e,t){return t=r.API.closeProgress(u.loadingName,t),i(r.API.sleep(500,t)).then(c(function(t,a){return r.API.openFeedback(u.successName,{data:e},a)}))})).catch(c(function(e,t){t=r.API.closeProgress(u.loadingName,t),console.error("loading failed",e);var a={code:e.name,detail:e.message};return r.API.openFeedback(u.failureName,a,t)}))},reset:function(t,a,o){var n=r.API.makePortal(o),l=n.enter,c=n.leave,i=e({confirmName:"confirm"},a);return c(r.API.openDialog(i.confirmName,{},o)).then(l(function(e,a){return a=r.API.closeDialog(i.confirmName,a),e?r.API.replace("",t,a):a}))},editPart:function(e,t,a){var o={method:"replace",action:e,data:r.API.extract(e,a)};return a=r.API.replace(t,o,a)},createPart:function(e,t,a,o){var n={method:"add",action:e,data:t};return o=r.API.replace(a,n,o)},commitPart:function(t,a,o,n){var l=e({errorSelector:null,idProperty:"id"},o),c=t+"/action",i=t+"/method",u=t+"/data";if(n=r.API.touchAll(u,n),n=r.API.validate(u,n),r.API.countValidationErrors(u,n))return l.errorSelector&&window.setTimeout(function(){var e=document.querySelector(l.errorSelector);e&&e.scrollIntoView()},100),n;var s=r.API.extract(i,n),P=r.API.extract(c,n),d=r.API.extract(u,n);if("add"==s){if(l.idProperty&&a){var m=r.API.extract(a,n);n=r.API.replace(a,m+1,n),d[l.idProperty]=m}n=r.API.add(P,d,n)}else n=r.API.replace(P,d,n);return n=r.API.replace(t,null,n)},discardPart:function(e,t){return t=r.API.replace(e,null,t)},removePart:function(t,a,o){var n=r.API.makePortal(o),l=n.enter,c=n.leave,i=e({confirmName:"confirm"},a);return c(r.API.openDialog(i.confirmName,{},o)).then(l(function(e,a){return a=r.API.closeDialog(i.confirmName,a),e?a=r.API.remove(t,a):a}))},copyPart:function(t,a,o,n){var l=e({pathToAdd:"",idProperty:"id"},o),c=r.API.extract(t,n);if(l.idProperty&&a){var i=r.API.extract(a,n);c[l.idProperty]=i,n=r.API.add(a,i+1,n)}var u=l.pathToAdd||t;return n=r.API.add(u,c,n)}})};exports.makeEntityUpdates=n;
},{"./framework":"Trba"}],"cYjw":[function(require,module,exports) {
"use strict";var t=this&&this.__assign||function(){return(t=Object.assign||function(t){for(var e,a=1,l=arguments.length;a<l;a++)for(var s in e=arguments[a])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../src/bindings/bulma"),a=require("../../src/core/repository"),l=require("../../src/core/updates"),s={type:"object",properties:{id:{type:"integer"},created:{type:"string"},name:{type:"string",notEmpty:!0},email:{type:"string",notEmpty:!0},content:{type:"string"}}},i={type:"object",properties:{name_like:{type:"string"},created_gte:{type:"string"},created_lte:{type:"string"},_page:{type:"integer"},_limit:{type:"integer"}}},n={type:"object",properties:{contacts:{type:"object",properties:{query:i,totalCount:{type:"integer"},items:{type:"array",items:s}}},form:{type:"object?",properties:{method:{type:"string"},data:s}},search:i}},o={contacts:{query:{name_like:"",created_gte:"",created_lte:"",_page:1,_limit:6},totalCount:0,items:[]},form:null,search:{name_like:"",created_gte:"",created_lte:"",_page:1,_limit:6}},c=t({},(0,l.makeEntityListUpdates)((0,a.createRestRepository)("http://localhost:3000/contacts"))),r=function(t){var a=t.env,l=e.API.extract("/form",a);return l?(0,e.h)(e.Modal,{shown:!0,key:"contactModal",id:"contactModal"},(0,e.h)("div",{class:"modal-card"},(0,e.h)("div",{class:"modal-card-head"},(0,e.h)("p",{class:"modal-card-title"},"コンタクト")),(0,e.h)("div",{class:"modal-card-body"},(0,e.h)(e.Notification,{name:"failure2",title:"エラー",message:"エラーが発生しました（{message}）"}),(0,e.h)(e.Field,{path:"/form/data/id",env:a,label:"ID"},(0,e.h)("div",{class:"control"},l.data.id>0?l.data.id:"（新規追加）")),(0,e.h)(e.Field,{path:"/form/data/created",label:"日時"},(0,e.h)("div",{class:"control"},(0,e.h)(e.Input,{type:"datetime-local",path:"/form/data/created"}))),(0,e.h)(e.Field,{path:"/form/data/name",label:"名前"},(0,e.h)("div",{class:"control"},(0,e.h)(e.Input,{path:"/form/data/name"}))),(0,e.h)(e.Field,{path:"/form/data/email",label:"メールアドレス"},(0,e.h)("div",{class:"control"},(0,e.h)(e.Input,{path:"/form/data/email"}))),(0,e.h)(e.Field,{path:"/form/data/content",label:"本文"},(0,e.h)("div",{class:"control"},(0,e.h)(e.Textarea,{path:"/form/data/content"})))),(0,e.h)("div",{class:"modal-card-foot"},(0,e.h)(e.UpdateButton,{name:"loading2",class:"button is-primary",update:"commitItem",context:["/form","/contacts",{failureName:"failure2",loadingName:"loading2"}]},"確定"),(0,e.h)(e.UpdateButton,{class:"button",update:"discardItem",context:["/form"]},"キャンセル")))):null},d=function(t){var a=e.API.extract("/contacts",t),l=(a.query._page-1)*a.query._limit+1,s=l+a.items.length-1,i=e.API.getPage("tab",t);return(0,e.h)("div",{class:"container my-3"},(0,e.h)(e.Notification,{name:"success",message:"成功しました。",duration:5e3}),(0,e.h)(e.Notification,{name:"failure",title:"エラー",message:"エラーが発生しました（{message}）"}),(0,e.h)(e.UpdateButton,{key:"updateButton",class:"button is-primary",update:"createItem",context:[{id:0,created:"",name:"",email:"",content:""},"/form"]},"新規追加"),(0,e.h)("nav",{class:"level",key:"search"},(0,e.h)("div",{class:"level-left"},(0,e.h)("div",{class:"level-item"},a.totalCount?a.totalCount+"件中 "+l+"～"+s:"コンタクトはありません")),(0,e.h)("div",{class:"level-right"},(0,e.h)("div",{class:"level-item"},(0,e.h)(e.Input,{path:"/search/name_like",placeholder:"名前"})),(0,e.h)("div",{class:"level-item"},(0,e.h)(e.Input,{path:"/search/created_gte",type:"date"}),"～",(0,e.h)(e.Input,{path:"/search/created_lte",type:"date"})),(0,e.h)("div",{class:"level-item"},(0,e.h)(e.UpdateButton,{update:"searchItems",context:["/search","/contacts",{}]},"検索")))),(0,e.h)(e.Pagination,{width:1,pageProperty:"_page",limitProperty:"_limit",listPath:"/contacts",loadItemsOptions:{totalCountHeader:"X-Total-Count",pageProperty:"_page"}}),(0,e.h)("table",{class:"table is-hoverable"},(0,e.h)("thead",null,(0,e.h)("th",null,"ID"),(0,e.h)("th",null,"日時"),(0,e.h)("th",null,"名前"),(0,e.h)("th",null,"メールアドレス"),(0,e.h)("th",null,"内容"),(0,e.h)("th",null," ")),(0,e.h)("tbody",null,a.items.map(function(t,a){return(0,e.h)("tr",{key:t.id},(0,e.h)("td",null,t.id),(0,e.h)("td",null,t.created),(0,e.h)("td",null,t.name),(0,e.h)("td",null,t.email),(0,e.h)("td",null,t.content.replace("\n","").slice(0,10)),(0,e.h)("td",null,(0,e.h)(e.UpdateButton,{class:"is-info is-inverted mx-1",update:"editItem",context:["/contacts/items/"+a,"/form"]},(0,e.h)("span",{class:"icon"},(0,e.h)("span",{class:"material-icons"},"edit"))),(0,e.h)(e.UpdateButton,{class:"is-danger is-inverted mx-1",update:"deleteItem",context:["/contacts/items/"+a,"/contacts",{}]},(0,e.h)("span",{class:"icon"},(0,e.h)("span",{class:"material-icons"},"delete")))))}))),(0,e.h)(e.Dialog,{name:"confirm",title:"確認",message:"削除しますよ？"}),(0,e.h)(r,{env:t}),(0,e.h)("div",{key:"tabs"},(0,e.h)("div",{class:"tabs"},(0,e.h)("ul",null,(0,e.h)("li",{class:0==i?"is-active":""},(0,e.h)(e.Clickable,{update:"setPage",context:["tab",0]},"概要")),(0,e.h)("li",{class:1==i?"is-active":""},(0,e.h)(e.Clickable,{update:"setPage",context:["tab",1]},"詳細")))),0==i?(0,e.h)("div",null,"概要です。"):1==i?(0,e.h)("div",null,"詳細です。"):null))},h=document.getElementById("app"),p=(0,e.start)({data:o,schema:n,view:d,containerEl:h,updates:c}).onUpdate;p({update:"loadItems",context:["/contacts",{}]});
},{"../../src/bindings/bulma":"mdXH","../../src/core/repository":"mRZ3","../../src/core/updates":"Ymvu"}]},{},["cYjw"], null)
//# sourceMappingURL=/index.js.map